(()=>{"use strict";const e=function(e){const t=e.length;return function n(){const i=Array.prototype.slice.call(arguments,0);return i.length>=t?e.apply(null,i):function(){const e=Array.prototype.slice.call(arguments,0);return n.apply(null,i.concat(e))}}},t=e((function(e,t){t.forEach(e)})),n=(e((function(e,t){return t.map(e)})),e((function(e,t){return t.filter(e)}))),i=(e((function(e,t){return t.some(e)})),e((function(e,t){return-1!=t.indexOf(e)}))),o=e((function(e,t){return n((t=>!i(t,e)),t)})),r=e(((e,t)=>t.getAttribute(e))),s=e(((e,t,n)=>n.setAttribute(e,t))),a=e(((e,t)=>t.removeAttribute(e))),c=e(((e,t)=>t.hasAttribute(e))),l=(e(((e,t,n)=>n.getAttribute(e)===t)),e(((e,t)=>{const n=r(e,t);s(e,("true"!==n).toString(),t)})),e(((e,t)=>e.appendChild(t))),e(((e,t)=>t.querySelector(e))),e(((e,t)=>{return n=t.querySelectorAll(e),Array.prototype.slice.call(n);var n})),e(((e,t)=>e.removeChild(t))),e(((e,t)=>t.classList.contains(e))),e(((e,t)=>t.classList.add(e)))),d=e(((e,t)=>t.classList.remove(e))),u=l("hidden"),h=d("hidden"),p=(e(((e,t)=>(e?h:u)(t))),e(((e,t,n)=>{n.classList[t?"add":"remove"](e)})),a("tabindex")),m=(t(p),s("tabindex","0")),v=s("tabindex","-1"),f=c("tabindex");class b{constructor(e){Object.assign(this,{listeners:{},on:function(e,t,n){const i={listener:t,scope:n};return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(i),this},fire:function(e,t){return(this.listeners[e]||[]).every((function(e){return!1!==e.listener.call(e.scope||this,t)}))},propagate:function(e,t){let n=this;e.forEach((e=>t.on(e,(t=>n.fire(e,t)))))}}),this.plugins=e||[],this.elements=[],this.negativeTabIndexAllowed=!1,this.on("nextElement",this.nextElement,this),this.on("previousElement",this.previousElement,this),this.on("firstElement",this.firstElement,this),this.on("lastElement",this.lastElement,this),this.initPlugins()}addElement(e){this.elements.push(e),this.firesEvent("addElement",e),1===this.elements.length&&this.setTabbable(e)}insertElementAt(e,t){this.elements.splice(t,0,e),this.firesEvent("addElement",e),1===this.elements.length&&this.setTabbable(e)}removeElement(e){this.elements=o([e],this.elements),f(e)&&(this.setUntabbable(e),this.elements[0]&&this.setTabbable(this.elements[0])),this.firesEvent("removeElement",e)}count(){return this.elements.length}firesEvent(e,t){const n=this.elements.indexOf(t);return this.fire(e,{element:t,index:n,elements:this.elements,oldElement:this.tabbableElement})}nextElement({index:e}){const t=e===this.elements.length-1,n=this.elements[t?0:e+1];this.setTabbable(n),n.focus()}firstElement(){const e=this.elements[0];this.setTabbable(e),e.focus()}lastElement(){const e=this.elements[this.elements.length-1];this.setTabbable(e),e.focus()}setTabbableByIndex(e){const t=this.elements[e];t&&this.setTabbable(t)}setTabbable(e){t(this.setUntabbable.bind(this),this.elements),m(e),this.tabbableElement=e}setUntabbable(e){e!==document.activeElement&&(this.negativeTabIndexAllowed?v(e):p(e))}previousElement({index:e}){const t=0===e,n=this.elements[t?this.elements.length-1:e-1];this.setTabbable(n),n.focus()}useNegativeTabIndex(){this.negativeTabIndexAllowed=!0,this.elements.forEach((e=>{e.hasAttribute("tabindex")||v(e)}))}initPlugins(){this.plugins.forEach((function(e){void 0!==e.init&&e.init(this)}),this)}}class g{constructor(){this.selectability=!0}init(e){this.boundHandleKeyDown=this.handleKeyDown.bind(this),this.controls=e,this.controls.on("addElement",this.listenForKeyDown,this),this.controls.on("removeElement",this.removeKeyDownListener,this)}listenForKeyDown({element:e}){e.addEventListener("keydown",this.boundHandleKeyDown)}removeKeyDownListener({element:e}){e.removeEventListener("keydown",this.boundHandleKeyDown)}handleKeyDown(e){switch(e.which){case 27:this.close(e.target),e.preventDefault(),e.stopPropagation();break;case 35:this.lastElement(e.target),e.preventDefault(),e.stopPropagation();break;case 36:this.firstElement(e.target),e.preventDefault(),e.stopPropagation();break;case 13:case 32:this.select(e.target),e.preventDefault(),e.stopPropagation();break;case 37:case 38:this.hasChromevoxModifiers(e)||(this.previousElement(e.target),e.preventDefault(),e.stopPropagation());break;case 39:case 40:this.hasChromevoxModifiers(e)||(this.nextElement(e.target),e.preventDefault(),e.stopPropagation())}}hasChromevoxModifiers(e){return e.shiftKey||e.ctrlKey}previousElement(e){!1!==this.controls.firesEvent("beforePreviousElement",e)&&(this.controls.firesEvent("previousElement",e),this.controls.firesEvent("afterPreviousElement",e))}nextElement(e){!1!==this.controls.firesEvent("beforeNextElement",e)&&(this.controls.firesEvent("nextElement",e),this.controls.firesEvent("afterNextElement",e))}select(e){this.selectability&&!1!==this.controls.firesEvent("before-select",e)&&(this.controls.firesEvent("select",e),this.controls.firesEvent("after-select",e))}firstElement(e){!1!==this.controls.firesEvent("beforeFirstElement",e)&&(this.controls.firesEvent("firstElement",e),this.controls.firesEvent("afterFirstElement",e))}lastElement(e){!1!==this.controls.firesEvent("beforeLastElement",e)&&(this.controls.firesEvent("lastElement",e),this.controls.firesEvent("afterLastElement",e))}disableSelectability(){this.selectability=!1}enableSelectability(){this.selectability=!0}close(e){!1!==this.controls.firesEvent("before-close",e)&&(this.controls.firesEvent("close",e),this.controls.firesEvent("after-close",e))}}var y=0,k=1,S=function(e,t,n,i,o,r){var s=this,a="interactive-360-video-".concat(r,"-menu-").concat(e),c=new b([new g]);c.on("close",(function(){return u()}));var l,d=[];H5P.EventDispatcher.call(s);var u=function(){s.control.setAttribute("aria-expanded","false"),s.control.focus(),s.popup.classList.remove("h5p-show"),s.trigger("close")},h=function(){"true"===s.control.getAttribute("aria-expanded")?u():(s.control.setAttribute("aria-expanded","true"),s.popup.classList.add("h5p-show"),s.trigger("open"),s.popup.querySelector('li[tabindex="0"]').focus())},p=function(e){var t=e.value===n.value,o=C(null,k,e.label,(function(){!function(e,t){n=t,function(e,t,n){for(var i=0;i<e.length;i++)t.call(n,e[i],i)}(l.querySelectorAll('[aria-checked="true"]'),(function(e){return e.setAttribute("aria-checked","false")}),this),e.setAttribute("aria-checked","true"),u(),s.trigger("select",t)}(this,e)}),"li",i);return d.push({option:e,element:o}),o.setAttribute("aria-checked",t.toString()),o.setAttribute("aria-describedby",a),c.addElement(o),t?o.setAttribute("tabindex","0"):o.removeAttribute("tabindex"),o};s.updateOptions=function(e){l&&l.parentNode.removeChild(l),(l=$(null,null,"ol")).setAttribute("role","menu");for(var t=0;t<e.length;t++)l.appendChild(p(e[t]));s.popup.appendChild(l)},s.popup=$("h5p-chooser h5p-"+e,'<h2 id="'.concat(a,'">').concat(o[e],"</h2>")),s.popup.setAttribute("role","dialog");var m=C("h5p-chooser-close-button",y,o.close,h,"div","button");s.popup.appendChild(m),s.control=C("h5p-control h5p-"+e,y,o[e],h,"div","button"),s.control.setAttribute("aria-haspopup","true"),s.overlayControl=C("h5p-minimal-button h5p-"+e,k,o[e],h,"div","menuitem"),s.overlayControl.tabIndex="-1",s.updateOptions(t)};(S.prototype=Object.create(H5P.EventDispatcher.prototype)).constructor=S;var $=function(e,t,n){var i=document.createElement(n||"div");return e&&(i.className=e),t&&(i.innerHTML=t),i},C=function(e,t,n,i,o,r){var s=$(e,t===k?n:"",o);return s.tabIndex=0,s.setAttribute("role",r),t===y&&(s.title=n),s.addEventListener("click",(function(e){i.call(s,e)}),!1),s.addEventListener("keydown",(function(e){32!==e.which&&13!==e.which||(e.preventDefault(),i.call(s,e))}),!1),s};const w=S,T={ENTER:13,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},x=(e,t,n={ctrl:!1,shift:!1})=>-1!==t.indexOf(e.which)&&(!(n.ctrl&&!e.ctrlKey)&&!(n.shift&&!e.shiftKey)),P=e=>-1!==[T.ENTER,T.SPACE].indexOf(e.which),E=(e,t,n)=>{e.on("keydown",(e=>{for(let i=0;i<t.length;i++){const o=t[i];if(x(e,[o.key],{ctrl:o.ctrl,shift:o.shift}))return o.preventDefault&&e.preventDefault(),n(e)}}))};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}var M=H5P.jQuery,B=function(e){return void 0!==e&&"string"==typeof e&&e.length>0},A=function(e){return B(e)?M("<div>".concat(e,"</div>")).text():void 0},R="timecode",D=function(e,t){return void 0!==e.goto&&e.goto.type===t},H=["H5P.Image","H5P.Nil","H5P.Table","H5P.Link","H5P.GoToQuestion","H5P.IVHotspot","H5P.Text"],V=["H5P.Text","H5P.Table"],F=function(e){return-1!==V.indexOf(e)};function O(e,t,n){var i,o,r,s,a=this;H5P.EventDispatcher.call(a);var c=e.action;n&&(c.userDatas={state:n});var l,d,u,h,p=c.library.split(" ")[0],m=t.l10n[function(e,t){return-1!==H.indexOf(e)||D(t,R)}(p,e)?"content":"interaction"],v="H5P.Nil"!==p&&"button"===e.displayType,f=[c.params.contentName,v?A(e.label):"","H5P.Link"===p&&void 0!==c.params.title?c.params.title:e.libraryTitle].filter(B)[0],b=!1,g=!1,y=!1,k=e.action.metadata;this.on("open-dialog",(function(){P()})),this.on("show-mask",(function(){L(this.getElement())}));var S=function(n){i=M("<div/>",{tabindex:0,role:"button",class:"h5p-interaction "+l+(n?"":" h5p-hidden"),"aria-haspopup":"dialog","aria-expanded":"false","aria-label":f,css:{left:e.x+"%",top:e.y+"%",width:"",height:""},on:{click:function(){a.dialogDisabled||(P(),i.attr("aria-expanded","true"))},keydown:function(e){13!==e.which&&32!==e.which||a.dialogDisabled||(P(),i.attr("aria-expanded","true"),e.preventDefault())}}}),a.getRequiresCompletion()&&void 0===t.editor&&t.currentState!==H5P.Interactive360Video.SEEKING&&P(!0),M("<div/>",{class:"h5p-touch-area"}).appendTo(i),M("<div/>",{class:"h5p-interaction-button"}).appendTo(i),t.editor&&i.hover((function(){i.is(".focused")||i.is(":focus")||t.dnb&&(!t.dnb||t.dnb.newElement)?(t.editor.hideInteractionTitle(),b=!1):(t.editor.showInteractionTitle(f,i),b=!0)}),(function(){t.editor.hideInteractionTitle(),b=!1})).focus((function(){t.editor.hideInteractionTitle(),b=!1})).click((function(){t.editor.hideInteractionTitle()}));var r=B(A(e.label));e.label&&r&&(o=$(e.label,"h5p-interaction").appendTo(i)),a.trigger("display",i),setTimeout((function(){i&&i.removeClass("h5p-hidden")}),0)},$=function(e){return M("<div/>",{class:"h5p-interaction-label ".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""),html:'<div class="h5p-interaction-label-text">'.concat(e,"</div>")})},C=function(){return(i=$(e.label,"h5p-interaction h5p-interaction-label-standalone")).css({left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),width:"",height:"initial"}),a.trigger("display",i),setTimeout((function(){i&&i.removeClass("h5p-hidden")}),0),i},w=function(t){if("timecode"===e.goto.type)t.click((function(t){1===t.which&&V({data:e.goto.time})})).keypress((function(t){32===t.which&&V({data:e.goto.time})})).attr("href","#").attr("tabindex","0");else{var n=e.goto.url;t.keypress((function(e){32===e.which&&this.click()})).attr({href:("other"!==n.protocol?n.protocol:"")+n.url,target:"_blank"})}return t.addClass("goto-clickable")},T=function(e){var n=!t.hasUncompletedRequiredInteractions(e);d&&d.trigger("hide"),i&&a.trigger("hide",i),a.isButton()?n&&t.dnb.dialog.close():(t.isMobileView&&n&&t.dnb.dialog.close(),i&&i.detach()),a.trigger("remove",i),n&&q(i)},x=function(e){if("H5P.Questionnaire"===p){if(e.find(".h5p-interaction-continue-button").length)return;var n=function(){var e=document.createElement("button");return e.innerHTML=t.l10n.continueWithVideo,e.className="h5p-interaction-continue-button",e.addEventListener("click",(function(){T(),t.play()})),e}(),i=e.find(".h5p-questionnaire-success-center");i.length&&i.get(0).appendChild(n),d.on("noSuccessScreen",(function(){T(),t.play()}))}"H5P.FreeTextQuestion"===p&&d.on("continue",(function(){T(),t.play()}))},P=function(n){var o=t.$container.find(".h5p-dialog-wrapper"),r=o.find(".h5p-dialog-titlebar");"function"==typeof d.setActivityStarted&&"function"==typeof d.getScore&&d.setActivityStarted();var s=a.isGotoClickable(),l=o.find("[tabindex]"),u=M(s?"<a>":"<div>",{class:"h5p-dialog-interaction h5p-frame"});!s&&F(p)&&u.attr("tabindex","0"),void 0!==t.editor?u.attr("tabindex",-1):0===l.length&&u.attr("tabindex",0),a.getRequiresCompletion()&&o.keydown((function(e){!function(e,t){var n=function(e){return t.target===e.get(0)},i=9===t.which,o=e.first(),r=e.last();i&&t.shiftKey&&n(o)?(r.focus(),t.preventDefault()):i&&n(r)&&(o.focus(),t.preventDefault())}(o.find('[tabindex="0"], button, input').filter(":visible"),e)}));var h=s?w(u):u;if(d.attach(h),x(h),U(d)&&(a.score=d.getScore(),a.maxScore=d.getMaxScore()),a.hasFullScore()&&n){if(o.hasClass("h5p-hidden"))return}else a.getRequiresCompletion()&&!a.hasFullScore()&&(t.dnb.dialog.hideCloseButton(),t.dnb.dialog.disableOverlay=!0,o.click((function(){a.hasFullScore()||t.showWarningMask().find(".h5p-button-back").click((function(){return u.find("button").last().focus()}))})));t.dnb.dialog.open(u),t.disableTabIndexes(),t.dnb.dialog.addLibraryClass(p),t.dnb.dialog.toggleClass("goto-clickable-visualize",!(!s||!e.goto.visualize)),t.dnb.dialog.toggleClass("h5p-goto-timecode",D(e,R)),t.dnb.dialog.disableOverlay&&t.restorePosterTabIndexes();t.dnb.dialog.once("close",(function(){t.dnb.$dialogContainer.one("transitionend",(function(){u.is(".h5p-image")&&u.find("img").css({width:"",height:""})}));try{void 0!==d.pause&&(d.pause instanceof Function||"function"==typeof d.pause)&&d.pause()}catch(e){H5P.error(e)}i&&(t.dnb.calledFromResetTask||i.focus(),i.attr("aria-expanded","false")),d&&d.trigger("hide");var e=o.find(".h5p-dialog-titlebar").find(".h5p-sc-sound-control");e.length&&o.find(".h5p-sc-set-wrapper").append(e)}));if(t.dnb.dialog.on("close",(function e(){a.dialogWidth=t.dnb.dialog.getDialogWidth(),t.dnb.dialog.off("close",e)})),"H5P.Image"===p){var m=t.dnb.dialog.getMaxSize(i),v=u.find("img");c.params.file.width&&c.params.file.height?E(v,m,{width:c.params.file.width,height:c.params.file.height},!t.isMobileView):(v.on("load",(function(){v.is(":visible")&&E(v,m,{width:this.width,height:this.height},!t.isMobileView)})),t.dnb.dialog.position(i))}else if(!t.isMobileView){var f=null;"H5P.FreeTextQuestion"===p?f="big":"H5P.Text"!==p&&"H5P.Table"!==p&&(f="medium"),t.dnb.dialog.position(i,{width:a.dialogWidth/16},f)}if("H5P.Summary"===p){var b=0;H5P.on(d,"resize",(function(){var e=u.height();(b>e+10||b<e-10)&&setTimeout((function(){t.dnb.dialog.scroll(e,300)}),500),b=e}))}if(r.find(".h5p-sc-sound-control").remove(),o.find(".h5p-sc-sound-control").length){var g=o.find(".h5p-sc-sound-control"),y=o.find(".h5p-dialog-close");if(y.length&&"none"!==y.css("display")){var k=2*parseFloat(y.css("right"))+2*parseFloat(y.css("padding-right"));g.css({right:k+"px"})}r.append(g)}setTimeout((function(){H5P.trigger(d,"resize")}),0)},E=function(e,n,o,r){o.width/=16,o.height/=16,o.height>n.height&&(o.width=o.width*n.height/o.height,o.height=n.height),o.width>n.width&&(o.height=o.height*n.width/o.width,o.width=n.width);var s=16/Number(e.css("fontSize").replace("px",""));e.css({width:o.width*s+"em",height:o.height*s+"em"}),r&&t.dnb.dialog.position(i,o)},V=function(n){a.isButton()&&t.dnb.dialog.close(),t.currentState!==H5P.Video.PAUSED&&t.currentState!==H5P.Video.ENDED||t.play();var i=n.data;i===e.duration.from&&(i+=.2),t.seek(i,{force:!0})},O=function(){var n=e.height||10,i=e.width||10,o=t.width/t.fontSize;return{height:n/(o/(t.$videoWrapper.width()/t.$videoWrapper.height()))*100+"%",width:i/o*100+"%"}},L=function(e){e.css("zIndex",52),t.showOverlayMask()},q=function(e){e&&e.css("zIndex",""),t.hideOverlayMask()},z=function(){var n=a.isGotoClickable(),o=O(),c=M.extend({},{backgroundColor:"rgb(255,255,255)",boxShadow:!0},e.visuals);if(i=M("<div/>",{"aria-label":t.l10n.interaction,tabindex:"-1",class:"h5p-interaction h5p-poster "+l+(n&&e.goto.visualize?" goto-clickable-visualize":""),css:{left:e.x+"%",top:e.y+"%",width:o.width,height:o.height}}),"H5P.IVHotspot"!==p){i.css("background",c.backgroundColor);var u=c.backgroundColor.split(",");if(u[3])0===parseFloat(u[3].replace(")",""))&&i.addClass("h5p-transparent-interaction")}!1===c.boxShadow&&i.addClass("h5p-box-shadow-disabled"),"H5P.Link"===p&&(i.css("height","auto"),i.css("width","auto"),void 0===t.editor&&i.click((function(){return window.open(d.getUrl()),t.pause(),!1}))),s=M("<div>",{class:"h5p-interaction-outer"}).appendTo(i),r=M(n?"<a>":"<div>",{class:"h5p-interaction-inner h5p-frame"}).appendTo(s),!n&&F(p)&&r.attr("tabindex","0"),void 0!==t.editor&&d.disableAutoPlay&&d.disableAutoPlay();var h=n?w(r):r;d.attach(h),x(h),a.trigger("display",i),a.getRequiresCompletion()&&t.currentState!==H5P.Interactive360Video.SEEKING&&void 0===t.editor&&!a.hasFullScore()&&(L(i),i.focus()),setTimeout((function(){H5P.trigger(d,"resize")}),0),"function"==typeof d.setActivityStarted&&"function"==typeof d.getScore&&d.setActivityStarted()},W=function(){var n,o,r=!0;if(e.adaptivity&&(o=a.hasFullScore(),r=!a.getRequiresCompletion()||o,o?n=e.adaptivity.correct:o||(n=e.adaptivity.wrong)),n&&void 0!==n.seekTo){t.pause(),!n.allowOptOut&&i&&(a.isButton()?(t.dnb.dialog.disableOverlay=!0,t.dnb.dialog.hideCloseButton()):L(i));var s=o?"correct":"wrong",c=n.seekLabel?n.seekLabel:t.l10n.defaultAdaptivitySeekLabel;d.hideButton("iv-continue").addButton("iv-adaptivity-"+s,c,(function(){T(n.seekTo),!o&&d.resetTask&&(d.resetTask(),d.hideButton("iv-adaptivity-"+s)),a.remove(),N(n.seekTo)})).showButton("iv-adaptivity-"+s,1).hideButton("iv-adaptivity-"+(o?"wrong":"correct"),1).hideButton("check-answer",1).hideButton("show-solution",1).hideButton("try-again",1),void 0!==d.disableInput&&(d.disableInput instanceof Function||"function"==typeof d.disableInput)&&d.disableInput(),setTimeout((function(){var e=n.message.replace("<p>","").replace("</p>","");d.updateFeedbackContent(e,!0),d.read(e)}),0)}else void 0!==d.hasButton&&(d.hasButton("iv-continue")||d.addButton("iv-continue",t.l10n.defaultAdaptivitySeekLabel,(function(){T(),N()})),d[r?"showButton":"hideButton"]("iv-continue"))},N=function(e){var n=K(),i=n.filter((function(e){return!e.isButton()}));if(i.length?n=i:n.length&&t.$container.find(".h5p-dialog-wrapper .h5p-dialog").show(),n.length){var o=n[0];return o.isButton()?o.trigger("open-dialog"):o.trigger("show-mask"),void t.pause()}t.currentState!==H5P.Video.ENDED&&(void 0!==e&&(t.pause(),t.seek(e,{force:!0})),t.play(),t.controls.$play.focus())},K=function(){return t.getVisibleInteractions().filter((function(e){return e!==a})).filter((function(e){return e.getRequiresCompletion()&&!e.hasFullScore()}))};a.isGotoClickable=function(){return-1!==["H5P.Text","H5P.Image"].indexOf(p)&&e.goto&&-1!==["timecode","url"].indexOf(e.goto.type)},a.getCurrentState=function(){if(d&&(d.getCurrentState instanceof Function||"function"==typeof d.getCurrentState))return d.getCurrentState()},a.getDuration=function(){if(!0===e.dynamic&&t&&t.video){var n=t.video.getDuration();if(void 0!==t.editor)return{from:0,to:n+1};var i=0,o=n;if(e.keyframes&&Array.isArray(e.keyframes)&&e.keyframes.length>0){var r=e.keyframes.map((function(e){return void 0!==e.time?e.time:null})).filter((function(e){return null!==e&&isFinite(e)}));r.length>0&&(i=Math.min.apply(null,r),o=Math.max.apply(null,r))}return{from:i,to:o+1}}return{from:e.duration.from,to:e.duration.to+1}},a.getRequiresCompletion=function(){return!!e.adaptivity&&!!e.adaptivity.requireCompletion},a.pause=function(){return e.pause},a.isButton=function(){return"button"===e.displayType||!(!t.isMobileView||"H5P.IVHotspot"===p)&&("H5P.Image"!==p||!1!==e.buttonOnMobile)},a.isStandaloneLabel=function(){return"H5P.Nil"===p},a.isMainSummary=function(){return!0===e.mainSummary},a.selectDot=function(){var e=a.getDuration().from;t.isSkippingProhibited(e)?t.showPreventSkippingMessage({x:e/t.video.getDuration()*t.controls.$slider.get(0).offsetWidth,y:-13},t.l10n.navForwardDisabled):(t.seekingTo=!0,Math.floor(10*t.video.getCurrentTime())!==Math.floor(10*e)&&(t.currentState===H5P.Video.VIDEO_CUED?(t.play(),t.seek(e)):t.currentState===H5P.Video.PLAYING?t.seek(e):(t.play(),t.seek(e),t.pause())))},a.addDot=function(){if("H5P.Nil"===p)return M("<div/>",{class:e});var e="h5p-seekbar-interaction "+l,n=a.getDuration(),i=M("<div/>",{role:"menuitem",class:e,"aria-label":"".concat(m,". ").concat(f),title:f,css:{left:n.from*t.oneSecondInPercentage+"%"},on:{click:a.selectDot,keydown:function(e){if(13===e.which||32===e.which)return a.selectDot(),!1}}});return t.preventSkipping&&i.attr("aria-disabled","true").attr("tabindex","-1"),a.$menuitem=i,i},a.isVisible=function(){return y},a.visibleAt=function(n){if(e.dynamic&&void 0!==t.editor)return!0;if(!0===e.dynamic){var i=a.getDuration();return!(n<i.from||n>=i.to)}return!(n<e.duration.from||n>=e.duration.to+1)},a.toggle=function(n,o){return a.visibleAt(n)?i?void 0:(y=!0,a.isStandaloneLabel()?C():a.isButton()?S(o):z(),void 0===t.editor?h=t.dnb.add(i,void 0,{dnbElement:h,disableContextMenu:!0}):(a.fit&&(t.editor.fit(i,e),a.fit=!1),i.focus((function(){t.pause()}))),i):(y=!1,void(i&&(h&&(h.hideContextMenu(),h===t.dnb.focusedElement&&(h.blur(),delete t.dnb.focusedElement)),t.editor&&b&&(t.editor.hideInteractionTitle(),b=!1),a.remove())))},a.setTitle=function(e){i&&i.attr("aria-label",e),f=e},a.reCreateInteraction=function(){"H5P.IVHotspot"!==p&&i&&(d&&d.trigger("hide"),a.trigger("hide",i),i.detach(),a.isStandaloneLabel()?C():a.isButton()?S(!0):z())},a.resizeInteraction=function(){a.isStandaloneLabel()||H5P.trigger(d,"resize")},a.positionLabel=function(e){i&&a.isButton()&&o&&!a.isStandaloneLabel()&&(o.removeClass("h5p-left-label"),parseInt(i.css("left"))+o.position().left+o.outerWidth()>e&&o.addClass("h5p-left-label"))},a.setPosition=function(t,n){e.x=t,e.y=n,i.css({left:t+"%",top:n+"%"})},a.setSize=function(t,n){t&&(e.width=t),n&&(e.height=n),H5P.trigger(d,"resize")},a.remove=function(){i&&(a.trigger("domHidden",{$dom:i,key:"videoProgressedPast"},{bubbles:!0,external:!0}),d&&d.trigger("hide"),a.trigger("hide",i),i.detach(),i=void 0)},a.reCreate=function(){l=function(){var t=e.className;if(void 0===t){var n=c.library.split(" ")[0].toLowerCase().split(".");t=n[0]+"-"+n[1]+"-interaction"}return e.goto&&"timecode"===e.goto.type&&(t+=" h5p-goto-timecode"),t}(),a.isStandaloneLabel()||(c.params=c.params||{},d=H5P.newRunnable(c,t.contentId,void 0,void 0,{parent:t,editing:void 0!==t.editor}),void 0===a.maxScore&&d.getMaxScore&&(a.maxScore=d.getMaxScore()),c.userDatas&&U(d)&&(a.score=d.getScore()),t.isTask||void 0===t.options.assets.endscreens||(d.isTask||void 0===d.isTask&&void 0!==d.showSolutions)&&(t.isTask=!0),d.on&&(d.on("xAPI",(function(e){var n=e.getVerifiedStatementValue(["context","contextActivities","parent"])||[],i=e.getContentXAPIId(t),o="completed"===e.getVerb()||"answered"===e.getVerb(),r=n.some((function(e){return e.id===i}));d.getScore&&(a.score=d.getScore()),d.getMaxScore&&(a.maxScore=d.getMaxScore()),r&&o&&e.getMaxScore()&&(a.score=null==e.getScore()?0:e.getScore(),a.maxScore=a.maxScore?a.maxScore:e.getMaxScore(),W()),a.setLastXAPIVerb(e.getVerb()),a.trigger(e)})),d.on("question-finished",(function(){W()})),d.on("resize",(function(){delete a.dialogWidth,t&&t.dnb&&t.dnb.dialog.removeStaticWidth()})),"H5P.IVHotspot"===p&&d.on("goto",V),"H5P.GoToQuestion"===p&&d.on("chosen",V)))};var U=function(e){return"undefined"!==I(e)&&"function"==typeof e.getScore&&"function"==typeof e.getMaxScore};a.setDnbElement=function(e){return h!==e&&(h=e,!0)},a.hasFullScore=function(){return a.score>=a.maxScore},a.getLibraryName=function(){return p},a.getMetadata=function(){return k},a.getTitle=function(){return f},a.isAnswerable=function(){return-1===H.indexOf(a.getLibraryName())&&!a.isStandaloneLabel()},a.setProgress=function(e){this.progress=e},a.getProgress=function(){return this.progress},a.setLastXAPIVerb=function(e){u=e},a.getLastXAPIVerb=function(){return u},a.getClass=function(){return l},a.getCopyrights=function(){if(!a.isStandaloneLabel()){var n=H5P.newRunnable(c,t.contentId);if(void 0!==n){var i=new H5P.ContentCopyrights;return i.addContent(H5P.getCopyrights(n,e,t.contentId)),i.setLabel(f+" "+H5P.Interactive360Video.humanizeTime(e.duration.from)+" - "+H5P.Interactive360Video.humanizeTime(e.duration.to)),i}}},a.getXAPIData=function(){if(d&&(d.getXAPIData instanceof Function||"function"==typeof d.getXAPIData))return d.getXAPIData()},a.getSubcontentId=function(){return c.subContentId},a.getElement=function(){return i},a.focusOnFirstTabbableElement=function(){if(i){var e=M(i.get(0)).find("[tabindex]");e&&e.length?e.get(0).focus():a.focus()}},a.focus=function(){i&&i.focus()},a.getClipboardData=function(){return H5P.DragNBar.clipboardify(H5PEditor.Interactive360Video.clipboardKey,e,"action")},a.repositionToWrapper=function(t){if(i&&"H5P.IVHotspot"!==p&&"H5P.FreeTextQuestion"!==p){if(g&&(i.css({top:e.y+"%",left:e.x+"%"}),i.css(a.isButton()?{height:"",width:""}:O()),g=!1),i.position().top+i.height()>t.height()){var n=(t.height()-i.height())/t.height()*100;if(n<0){n=0;var o=t.height()/parseFloat(i.css("font-size"));i.css("height",o+"em")}i.css("top",n+"%"),g=!0}if(i.position().left+i.width()>t.width()){var r=(t.width()-i.width())/t.width()*100;if(r<0){r=0;var s=t.width()/parseFloat(i.css("font-size"));i.css("width",s+"em")}i.css("left",r+"%"),g=!0}}},a.resetTask=function(){var e;void 0!==c.userDatas&&void 0!==c.userDatas.state&&delete c.userDatas.state,delete a.score,delete a.maxScore,delete a.progress,"function"==typeof(null===(e=a.getInstance())||void 0===e?void 0:e.resetTask)&&a.getInstance().resetTask(),a.reCreate()},a.getInstance=function(){return d},a.reCreate()}O.prototype=Object.create(H5P.EventDispatcher.prototype),O.prototype.constructor=O,O.PROGRESS_INTERACTED=0,O.PROGRESS_ANSWERED=1;const L=O;var q=function(){function e(e){this.l10n=e;var t=document.createElement("div");t.classList.add("h5p-iv-interactions-announcer"),t.setAttribute("aria-live","polite"),this.interactionsAnnouncer=t}var t=e.prototype;return t.getInteractionAnnouncer=function(){return this.interactionsAnnouncer},t.announceInteractions=function(e){e.length>0&&(this.interactionsAnnouncer.textContent="",this.interactionsAnnouncer.textContent="\n        ".concat(this.getAnnouncementMessage(e.length),"\n        ").concat(this.getTitleAnnouncement(e.length,e[0]),"\n        ").concat(this.getPauseAnnouncement(e)))},t.getAnnouncementMessage=function(e){return 0===e?"":1===e?this.l10n.singleInteractionAnnouncement:this.l10n.multipleInteractionsAnnouncement},t.getTitleAnnouncement=function(e,t){return 1===e?t.getTitle():""},t.getPauseAnnouncement=function(e){return e.some((function(e){return e.pause()}))?". ".concat(this.l10n.videoPausedAnnouncement):""},e}(),z=H5P.jQuery,W=!!navigator.userAgent.match(/iPod|iPhone|iPad/g),N=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{content:"",maxWidth:"auto",style:"h5p-interactive-360-video-bubble",mode:"centered",focus:function(){}};this.$reference=e,this.maxWidth=t.maxWidth,this.style=t.style,this.mode=t.mode,this.focus=t.focus,this.$tail=z("<div/>",{class:"".concat(this.style,"-tail")}),this.$innerTail=z("<div/>",{class:"".concat(this.style,"-inner-tail")}),this.$content=z("<div/>",{class:"".concat(this.style,"-text")}),"string"==typeof t.content?this.$content.html(t.content):this.$content.append(t.content),this.$innerBubble=z("<div/>",{class:"".concat(this.style,"-inner")}).append(this.$content).prepend(this.$innerTail),this.$h5pContainer=this.$reference.closest(".h5p-interactive-360-video"),this.$bubble=z("<div/>",{class:this.style,"aria-live":"polite"}).append([this.$tail,this.$innerBubble]).addClass("".concat(this.style,"-inactive")).appendTo(this.$h5pContainer),W&&H5P.$body.css("cursor","pointer"),"centered"===this.mode&&this.$bubble.css({width:"auto"===this.maxWidth?"auto":"".concat(this.maxWidth,"px")}),this.update()}var t=e.prototype;return t.update=function(){var e=this,t=this.getOffsetBetween(this.$h5pContainer,this.$reference),n="full"===this.mode?this.$bubble.outerWidth():Math.min(.9*t.outerWidth,"auto"===this.maxWidth?this.$bubble.outerWidth():this.maxWidth),i=this.getBubblePosition(n,t,this.mode);"centered"===this.mode&&this.$bubble.css({bottom:void 0===i.bottom?void 0:"".concat(i.bottom,"px"),left:"".concat(i.left,"px")}),setTimeout((function(){var t=e.getTailPosition(e.$reference),n={bottom:"".concat(t.bottom,"px"),left:"string"==typeof t.left?t.left:"".concat(t.left,"px")};e.$tail.css(n),e.$innerTail.css(n)}),75)},t.animate=function(){var e=this;this.$bubble.hasClass("".concat(this.style,"-inactive"))&&(this.$bubble.removeClass("".concat(this.style,"-inactive")).addClass("".concat(this.style,"-active")),setTimeout((function(){e.$bubble.removeClass("".concat(e.style,"-active")).addClass("".concat(e.style,"-inactive"))}),2e3))},t.setContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$content.html(e),this.update()},t.getContent=function(){return this.$content.get(0).outerHTML},t.isActive=function(){return this.$bubble.hasClass("".concat(this.style,"-active"))},t.toggle=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=void 0===e?!this.isActive():e)&&n?(setTimeout((function(){t.$bubble.removeClass("".concat(t.style,"-preparing")).addClass("".concat(t.style,"-active")),setTimeout((function(){return t.focus()}),400)}),100),this.$bubble.removeClass("".concat(this.style,"-inactive")).addClass("".concat(this.style,"-preparing"))):this.$bubble.toggleClass("".concat(this.style,"-inactive"),!e).toggleClass("".concat(this.style,"-active"),e),this.update()},t.getBubblePosition=function(e,t,n){var i=e/2;return{bottom:"full"===n?void 0:t.bottom+t.innerHeight+4,left:"full"===n?(t.outerWidth-e)/2:t.left-i+16}},t.getTailPosition=function(e){return{left:e.offset().left-this.$tail.parent().offset().left+8,top:-6,bottom:-6}},t.getOffsetBetween=function(e,t){var n=e[0].getBoundingClientRect(),i=t[0].getBoundingClientRect();return{top:i.top-n.top,right:n.right-i.right,bottom:n.bottom-i.bottom,left:i.left-n.left+parseInt(t.css("marginLeft")),innerWidth:i.width,innerHeight:i.height,outerWidth:n.width,outerHeight:n.height}},t.fullscreen=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.isMobilePhone(),o={maxHeight:"",top:""};e&&!i&&void 0!==t&&void 0!==n&&(o.maxHeight="calc(".concat(n,"px - 1em - 9px)"),o.top="calc(((".concat(t-n,"px + 1em) / 2) - 9px)")),this.$bubble.toggleClass("mobile-fullscreen",i&&e),this.$bubble.css(o)},t.isMobilePhone=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.substr(0,4))},e}();const K=N,U=(e,t,{ignoreKeyboard:n=!1,preventDefaultForKeys:i=!0}={})=>{const o=e=>{"click"!==e.type&&i&&e.preventDefault(),t(e)};e.click(o),!0!==n&&E(e,[{key:T.SPACE},{key:T.ENTER}],o)};function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}var j=H5P.jQuery,Q="h5p-interactive-360-video-endscreen",Y="h5p-interactive-360-video-endscreen-submit-button-hidden",_=function(e){return null!=e};const X=function(e){function t(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(n=e.call(this)||this).parent=t,n.l10n=j.extend({title:"@answered Questions answered",information:"You have answered @answered questions, click below to submit your answers.",informationOnSubmitButtonDisabled:"You have answered @answered questions.",informationNoAnswers:"You have not answered any questions.",informationMustHaveAnswer:"You have to answer at least one question before you can submit your answers.",submitButton:"Submit Answers",submitMessage:"Your answers have been submitted!",tableRowAnswered:"Answered questions",tableRowScore:"Score",answeredScore:"answered",tableRowSummaryWithScore:"You got @score out of @total points for the @question that appeared after @minutes minutes and @seconds seconds.",tableRowSummaryWithoutScore:"You have answered the @question that appeared after @minutes minutes and @seconds seconds."},i.l10n),n.isSubmitButtonEnabled=n.parent.isSubmitButtonEnabled,n.buildDOM(),n}var n,i;i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,G(n,i);var o=t.prototype;return o.buildDOM=function(){var e=this;this.$endscreenIntroductionTitleText=j("<div/>",{class:"".concat(Q,"-introduction-title-text"),id:"".concat(Q,"-introduction-title-text")}),this.$closeButton=j("<div>",{role:"button",class:"".concat(Q,"-close-button"),tabindex:"0","aria-label":this.parent.l10n.close}),U(this.$closeButton,(function(){return e.parent.toggleEndscreen(!1)}));var t=j("<div/>",{class:"".concat(Q,"-introduction-title")}).append([this.$endscreenIntroductionTitleText,this.$closeButton]);this.$endscreenIntroductionText=j("<div/>",{class:"".concat(Q,"-introduction-text"),id:"".concat(Q,"-introduction-text")}),this.isSubmitButtonEnabled&&(this.$submitButtonContainer=j("<div/>",{class:"".concat(Q,"-submit-button-container ").concat(Y)}),this.$submitButton=H5P.JoubelUI.createButton({class:"".concat(Q,"-submit-button"),html:this.l10n.submitButton,appendTo:this.$submitButtonContainer,click:function(){return e.handleSubmit()}})),this.$endscreenOverviewTitle=j("<div/>",{class:"".concat(Q,"-overview-title")}).append(j("<div/>",{class:"".concat(Q,"-overview-title-answered-questions"),html:this.l10n.tableRowAnswered})).append(j("<div/>",{class:"".concat(Q,"-overview-title-score"),html:this.l10n.tableRowScore})),this.$endscreenBottomTable=j("<div/>",{class:"".concat(Q,"-overview-table")}),this.$endscreen=j("<div/>",{class:Q,role:"dialog","aria-labelledby":"".concat(Q,"-introduction-title-text"),"aria-describedby":"".concat(Q,"-introduction-text")}).append(j("<div/>",{class:"".concat(Q,"-introduction")}).append(j("<div/>",{class:"".concat(Q,"-star-symbol")})).append(j("<div/>",{class:"".concat(Q,"-introduction-container")}).append([t,this.$endscreenIntroductionText,this.$submitButtonContainer]))).append(j("<div/>",{class:"".concat(Q,"-overview")}).append(this.$endscreenOverviewTitle).append(this.$endscreenBottomTable))},o.handleSubmit=function(){var e=this;this.$submitButtonContainer.hasClass(Y)||(this.parent.setUserSubmitted(!0),this.$submitButtonContainer.addClass(Y),this.$endscreenIntroductionText.html('<div class="'.concat(Q,'-introduction-text-submitted">').concat(this.l10n.submitMessage,"</div>")),this.answered.forEach((function(t){if("completed"!==t.getLastXAPIVerb()&&"answered"!==t.getLastXAPIVerb()){var n=new H5P.XAPIEvent;n.data.statement=t.getXAPIData().statement,t.setLastXAPIVerb(n.getVerb()),e.trigger(n)}})),this.parent.triggerXAPIScored(this.parent.getUsersScore(),this.parent.getUsersMaxScore(),"completed"))},o.getDOM=function(){return this.$endscreen},o.buildTableRow=function(e,t,n,i){var o=this,r=_(n)&&_(i),s=r?this.l10n.tableRowSummaryWithScore:this.l10n.tableRowSummaryWithoutScore,a=this.parent.isSkippingProhibited(e)?" ".concat(Q,"-no-link"):"",c=j("<div/>",{class:"".concat(Q,"-overview-table-row").concat(a),role:"row",tabIndex:0,"aria-label":s.replace("@score",n).replace("@total",i).replace("@question",t).replace("@minutes",Math.floor(e/60)).replace("@seconds",e%60)});return U(c,(function(){return o.jump(e)})),j("<div/>",{class:"".concat(Q,"-overview-table-row-time"),html:H5P.Interactive360Video.humanizeTime(e),appendTo:c,"aria-hidden":!0}),j("<div/>",{class:"".concat(Q,"-overview-table-row-title"),html:t,appendTo:c,"aria-hidden":!0}),j("<div/>",{class:"".concat(Q,"-overview-table-row-score"),html:r?"".concat(n," / ").concat(i):this.l10n.answeredScore,appendTo:c,"aria-hidden":!0}),c},o.jump=function(e){this.parent.isSkippingProhibited(e)||(this.parent.seek(e),this.parent.toggleEndscreen(!1))},o.update=function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(this.answered=n.filter((function(e){return void 0!==e.getProgress()})).sort((function(e,t){return e.getDuration().from-t.getDuration().from})),this.isSubmitButtonEnabled)&&(null===(e=this.$submitButtonContainer)||void 0===e||e.addClass(Y));this.$endscreenBottomTable.empty(),this.answered.forEach((function(e){var n=e.getDuration().from,i=t.getDescription(e),o=e.getInstance(),r=o.getScore?o.getScore():void 0,s=o.getMaxScore?o.getMaxScore():void 0;t.$endscreenBottomTable.append(t.buildTableRow(n,i,r,s))}));var i=this.answered.length;this.$endscreenIntroductionTitleText.html(this.l10n.title.replace("@answered",i)),0===i?this.$endscreenIntroductionText.html('<div class="'.concat(Q,'-bold-text">').concat(this.l10n.informationNoAnswers,"</div>\n      ").concat(this.isSubmitButtonEnabled?"<div>".concat(this.l10n.informationMustHaveAnswer,"<div>"):"")):this.$endscreenIntroductionText.html(this.isSubmitButtonEnabled?this.l10n.information.replace("@answered",i):this.l10n.informationOnSubmitButtonDisabled.replace("@answered",i)),this.isSubmitButtonEnabled&&i>0&&this.$submitButtonContainer.removeClass(Y)},o.getDescription=function(e){return"function"==typeof e.getInstance&&"function"==typeof e.getInstance().getTitle?e.getInstance().getTitle():e.getTitle()},o.focus=function(){!this.isSubmitButtonEnabled||this.$submitButtonContainer.hasClass(Y)?this.$closeButton.focus():this.$submitButton.focus()},t}(H5P.EventDispatcher);var J=H5P.jQuery;function Z(e,t,n){var i,o,r,s,a,c=this;H5P.EventDispatcher.call(c),c.contentId=t,c.contentData=n,c.params=e,c.instanceIndex=se(),c.isSubmitButtonEnabled=void 0===n||void 0===n.isScoringEnabled||void 0===n.isReportingEnabled||n.isScoringEnabled||n.isReportingEnabled,c.bookmarksMenuId="interactive-360-video-"+this.contentId+"-bookmarks-chooser",c.endscreensMenuId="interactive-360-video-"+this.contentId+"-endscreens-chooser",c.qualityMenuId="interactive-360-video-"+this.contentId+"-quality-chooser",c.captionsMenuId="interactive-360-video-"+this.contentId+"-captions-chooser",c.playbackRateMenuId="interactive-360-video-"+this.contentId+"-playback-rate-chooser",c.popupMenuButtons=[],c.popupMenuChoosers=[],this.visibleInteractions=[],c.isMinimal=!1,c.options=J.extend({video:{textTracks:{videoTrack:[]}},assets:{}},e.interactive360Video),c.options.video.startScreenOptions=c.options.video.startScreenOptions||{},c.qualities=void 0,c.options.video.startScreenOptions.title||(c.options.video.startScreenOptions.title="Interactive 360 Video"),c.startScreenOptions=J.extend({hideStartTitle:!1,shortStartDescription:""},c.options.video.startScreenOptions),e.override&&(e.override.showSolutionButton||e.override.retryButton)&&(c.override={},e.override.showSolutionButton&&(c.override.enableSolutionsButton="on"===e.override.showSolutionButton),e.override.retryButton&&(c.override.enableRetry="on"===e.override.retryButton)),void 0!==e.override&&(c.showRewind10=void 0!==e.override.showRewind10&&e.override.showRewind10,c.showBookmarksmenuOnLoad=void 0!==e.override.showBookmarksmenuOnLoad&&e.override.showBookmarksmenuOnLoad,c.preventSkippingMode=e.override.preventSkippingMode||"none",c.deactivateSound=e.override.deactivateSound||!1),c.l10n=J.extend({interaction:"Interaction",play:"Play",pause:"Pause",mute:"Mute, currently unmuted",unmute:"Unmute, currently muted",quality:"Video quality",captions:"Captions",close:"Close",fullscreen:"Fullscreen",exitFullscreen:"Exit fullscreen",summary:"Open summary dialog",bookmarks:"Bookmarks",endscreen:"Submit Screen",endscreens:"Submit Screens",defaultAdaptivitySeekLabel:"Continue",continueWithVideo:"Continue with video",more:"More player options",playbackRate:"Playback rate",rewind10:"Rewind 10 seconds",navDisabled:"Navigation is disabled",navForwardDisabled:"Navigating forward is disabled",sndDisabled:"Sound is disabled",requiresCompletionWarning:"You need to answer all the questions correctly before continuing.",back:"Back",hours:"Hours",minutes:"Minutes",seconds:"Seconds",currentTime:"Current time:",totalTime:"Total time:",singleInteractionAnnouncement:"Interaction appeared:",multipleInteractionsAnnouncement:"Multiple interactions appeared:",videoPausedAnnouncement:"Video was paused",content:"Content",answered:"@answered answered!",videoProgressBar:"Video progress",howToCreateInteractions:"Play the video to start creating interactions"},e.l10n),c.l10n.play+=" (k)",c.l10n.pause+=" (k)",c.l10n.mute+=" (m)",c.l10n.unmute+=" (m)",n&&void 0!==n.previousState&&void 0!==n.previousState.progress&&void 0!==n.previousState.answers&&(c.previousState=n.previousState),c.menuitems=[],c.lastState=H5P.Video.ENDED,c.justVideo=!1;var l=navigator.userAgent.match(/(iPhone|iPod) OS (\d*)_/i);null!==l&&3===l.length&&(c.justVideo=l[2]<10),c.currentTime=Math.floor(void 0!==(null===(i=c.previousState)||void 0===i?void 0:i.progress)&&null!==(null===(o=c.previousState)||void 0===o?void 0:o.progress)?c.previousState.progress:(null===(r=e.override)||void 0===r?void 0:r.startVideoAt)||0),this.maxTimeReached=c.previousState&&c.previousState.maxTimeReached?c.previousState.maxTimeReached:0,c.interactionsProgress=[],c.previousState&&c.previousState.interactionsProgress&&(c.interactionsProgress=c.previousState.interactionsProgress),this.setUserSubmitted(null===(s=this.previousState)||void 0===s?void 0:s.submitted),a=e.override&&!!e.override.loop,c.$videoWrapper=J("<div>",{class:"h5p-video-wrapper"}),c.threeScene=null,c.threeCamera=null,c.threeRenderer=null,c.threeSphere=null,c.threeVideoTexture=null,c.threeCanvas=null,c.threeVideoElement=null,c.isDragging=!1,c.previousMousePosition={x:0,y:0},c.cameraRotation={x:0,y:Math.PI},c.animationFrameId=null,c.raycaster=null,c.mouse=null,c.draggingMarker=null,c.dragStartPosition=null,c.cameraControlsEnabled=!0,c.$controls=J("<div>",{role:"toolbar",class:"h5p-controls hidden"}),c.$read=J("<div/>",{"aria-live":"polite",class:"hidden-but-read"}),this.fontSize=16,this.width=640;var d=!1,u=!0,h=!1;if(c.isTask=!1,c.interactions=[],c.options.assets.interactions)for(var p=0;p<c.options.assets.interactions.length;p++)this.initInteraction(p);c.initialize=function(){var t,n;if(!h){h=!0,c.on("resize",(function(){c.resize()}));var i=this.editor?[]:c.options.video.textTracks&&c.options.video.textTracks.videoTrack?c.options.video.textTracks.videoTrack:[];c.video=H5P.newRunnable({library:"H5P.Video 1.6",params:{sources:c.options.video.files,visuals:{poster:c.options.video.startScreenOptions.poster,controls:c.justVideo,fit:!1,disableRemotePlayback:!0},startAt:(null===(t=e.override)||void 0===t?void 0:t.startVideoAt)||0,a11y:i,playback:{autoplay:e.override&&!!e.override.autoplay,deactivateSound:c.deactivateSound}}},c.contentId,void 0,void 0,{parent:c,previousState:{time:null===(n=c.previousState)||void 0===n?void 0:n.progress}}),c.justVideo?c.video.on("loaded",(function(){c.trigger("resize")})):(c.video.on("containerLoaded",(function(){c.trigger("resize")})),c.video.on("loaded",(function(){d=!0,c.loaded(),c.controls||(c.addControls(),c.trigger("resize")),c.updateCurrentTime(c.currentTime),c.setSliderPosition(c.currentTime)})),c.video.on("canplay",(function(){c.trigger("resize")})),c.video.on("error",(function(){c.removeSplash()})),c.video.on("stateChange",(function(t){var n,i;!c.controls&&d&&(c.addControls(),c.trigger("resize"));var o=t.data;if(c.currentState!==Z.SEEKING)switch(o){case H5P.Video.ENDED:c.currentState=H5P.Video.ENDED,c.controls.$play.addClass("h5p-pause").attr("aria-label",c.l10n.play),c.timeUpdate(c.video.getCurrentTime()),c.updateCurrentTime(c.getDuration());var r=c.interactions.map((function(e){return e.getProgress()||0})).reduce((function(e,t){return e+t}),0);if(c.endscreensMap[c.getDuration()]&&r>0&&c.toggleEndscreen(!0),a){c.video.play();var s=e.override&&e.override.startVideoAt?e.override.startVideoAt:0;c.seek(s)}break;case H5P.Video.PLAYING:if(u){c.addQualityChooser(),c.addPlaybackRateChooser(),c.removeSplash(),c.startUpdatingBufferBar(),c.toggleBookmarksChooser(!1,{firstPlay:u}),c.toggleEndscreensChooser(!1,{firstPlay:u}),u=!1;var l=c.options.video.startScreenOptions.poster;l&&void 0!==l.path&&setTimeout((function(){c.trigger("resize")}),400)}c.currentState=H5P.Video.PLAYING,null===(n=c.controls)||void 0===n||n.$play.removeClass("h5p-pause").attr("aria-label",c.l10n.pause),null!==(i=c.controls)&&void 0!==i&&i.$play.is(":focus")&&(c.controls.$play.blur(),c.controls.$play.focus()),c.timeUpdate(c.video.getCurrentTime());break;case H5P.Video.PAUSED:c.currentState=H5P.Video.PAUSED,c.controls.$play.addClass("h5p-pause").attr("aria-label",c.l10n.play),c.focusInteraction?(c.focusInteraction.focusOnFirstTabbableElement(),delete c.focusInteraction):c.controls.$play.is(":focus")&&(c.controls.$play.blur(),c.controls.$play.focus()),c.timeUpdate(c.video.getCurrentTime());break;case H5P.Video.BUFFERING:c.currentState=H5P.Video.BUFFERING,c.removeSplash(),c.startUpdatingBufferBar()}})),c.video.on("qualityChange",(function(e){var t=e.data;if(c.controls&&c.controls.$qualityChooser){if("YouTube"===this.getHandlerName()){if(!c.qualities)return;var n=c.qualities.filter((function(t){return t.name===e.data}))[0];return void c.controls.$qualityChooser.find("li").attr("data-quality",e.data).html(n.label)}c.controls.$qualityChooser.find("li").attr("aria-checked","false").filter('[data-quality="'+t+'"]').attr("aria-checked","true")}})),c.video.on("playbackRateChange",(function(e){var t=e.data;c.controls&&c.controls.$playbackRateChooser&&c.controls.$playbackRateChooser.find("li").attr("aria-checked","false").filter('[playback-rate="'+t+'"]').attr("aria-checked","true")})),c.on("enterFullScreen",(function(){var e=this;c.hasFullScreen=!0,c.$container.parent(".h5p-content").css("height","100%"),c.controls.$fullscreen.addClass("h5p-exit").attr("aria-label",c.l10n.exitFullscreen),c.controls.$fullscreen.blur(),c.controls.$fullscreen.focus(),c.resizeInteractions(),setTimeout((function(){void 0!==e.bubbleEndscreen&&e.bubbleEndscreen.update()}),225)})),c.on("exitFullScreen",(function(){c.$container.hasClass("h5p-standalone")&&c.$container.hasClass("h5p-minimal")&&c.pause(),c.hasFullScreen=!1,c.$container.parent(".h5p-content").css("height",""),c.controls.$fullscreen.removeClass("h5p-exit").attr("aria-label",c.l10n.fullscreen),c.controls.$fullscreen.blur(),c.controls.$fullscreen.focus(),c.resizeInteractions(),c.dnb&&c.dnb.dialog&&!c.hasUncompletedRequiredInteractions()&&c.dnb.dialog.close()})),c.video.on("captions",(function(e){c.controls||(c.addControls(),c.trigger("resize")),c.setCaptionTracks(e.data)})),c.accessibility=new q(c.l10n))}},c.togglePlayPause=function(){var e=c.isDisabled(c.controls.$play);if(c.controls.$play.hasClass("h5p-pause")&&!e){var t=!screen||Math.min(screen.width,screen.height)<=c.width;H5P.fullscreenSupported&&!c.hasFullScreen&&t&&c.$container.hasClass("h5p-standalone")&&c.$container.hasClass("h5p-minimal")&&c.toggleFullScreen(),c.video.play(),c.toggleEndscreen(!1),c.closePopupMenus()}else c.video.pause();c.handleAnswered()},c.toggleMute=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=c.controls.$volume;c.deactivateSound||(t.hasClass("h5p-muted")?(t.removeClass("h5p-muted").attr("aria-label",c.l10n.mute),c.video.unMute()):(t.addClass("h5p-muted").attr("aria-label",c.l10n.unmute),c.video.mute()),e&&(t.blur(),t.focus()))}}function ee(e,t){return void 0!==e.editor&&t&&!0===t.dynamic}function te(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function ne(e,t){return e&&e.assets&&e.assets.interactions&&e.assets.interactions[t]?e.assets.interactions[t]:null}Z.prototype=Object.create(H5P.EventDispatcher.prototype),Z.prototype.constructor=Z,Z.prototype.setCaptionTracks=function(e){var t=this;if(e.unshift(new H5P.Video.LabelValue("Off","off")),t.captionsTrackSelector)t.captionsTrackSelector.updateOptions(e);else{var n=this.editor?void 0:t.options.video.textTracks.defaultTrackLabel,i=e.reduce((function(e,t){return void 0===e&&n&&t.label===n?t:e}),void 0)||t.video.getCaptionsTrack();i||(i=e[0]),t.captionsTrackSelector=new w("captions",e,i,"menuitemradio",t.l10n,t.contentId),t.controls.$captionsButton=J(t.captionsTrackSelector.control),t.popupMenuButtons.push(t.controls.$captionsButton),t.controls.$volume?J(t.captionsTrackSelector.control).insertAfter(t.controls.$volume):J(t.captionsTrackSelector.control).insertAfter(t.controls.$qualityButton),J(t.captionsTrackSelector.popup).css(t.controlsCss).insertAfter(J(t.captionsTrackSelector.control)),t.popupMenuChoosers.push(J(t.captionsTrackSelector.popup)),J(t.captionsTrackSelector.overlayControl).insertAfter(t.controls.$qualityButtonMinimal),t.controls.$overlayButtons=t.controls.$overlayButtons.add(t.captionsTrackSelector.overlayControl),t.captionsTrackSelector.on("select",(function(e){t.video.setCaptionsTrack("off"===e.data.value?null:e.data)})),t.captionsTrackSelector.on("close",(function(){t.controls.$overlayButtons.removeClass("h5p-hide"),"true"===t.controls.$more.attr("aria-expanded")&&t.controls.$more.click(),t.resumeVideo()})),t.captionsTrackSelector.on("open",(function(){t.controls.$overlayButtons.addClass("h5p-hide"),t.closePopupMenus(t.controls.$captionsButton)})),t.minimalMenuKeyboardControls.insertElementAt(t.captionsTrackSelector.overlayControl,2)}},Z.prototype.getCurrentState=function(){var e=this;if(e.video&&e.video.play){var t={submitted:this.userSubmitted,progress:e.currentTime,maxTimeReached:this.maxTimeReached||null,answers:[],interactionsProgress:e.interactions.slice().sort((function(e,t){return e.getDuration().from-t.getDuration().from})).map((function(e){return e.getProgress()}))};if(void 0!==e.interactions)for(var n=0;n<e.interactions.length;n++)t.answers[n]=e.interactions[n].getCurrentState();if(!H5P.isEmpty(t.answers)||parseInt(t.progress)!==(e.params.override.startVideoAt||0))return t}},Z.prototype.removeSplash=function(){void 0!==this.$splash&&(this.$splash.remove(),delete this.$splash)},Z.prototype.attach=function(e){var t=this;this.$container=e,this.initialize(),void 0!==this.isRoot&&this.isRoot()&&this.setActivityStarted(),e.addClass("h5p-interactive-360-video").html(""),this.$videoWrapper.appendTo(e),this.$controls.appendTo(e);var n=this.hasMainSummary();if(this.interactions&&this.interactions.forEach((function(e){e.reCreate(),e.isAnswerable()&&(n=!0)})),this.hasStar=this.editor||void 0!==this.options.assets.endscreens&&this.options.assets.endscreens.length&&n,this.attachVideo(this.$videoWrapper),this.justVideo)return this.$videoWrapper.find("video").css("minHeight","200px"),void e.children(":not(.h5p-video-wrapper)").remove();this.$read.appendTo(e),this.readText=null,void 0===this.editor?(this.dnb=new H5P.DragNBar([],this.$videoWrapper,this.$container,{disableEditor:!0}),this.dnb.dialog.on("open",(function(){t.lastState=t.currentState,t.currentState!==H5P.Video.PAUSED&&t.currentState!==H5P.Video.ENDED&&t.video.pause()})),this.dnb.dialog.on("close",(function(){t.restoreTabIndexes(),t.lastState!==H5P.Video.PAUSED&&t.lastState!==H5P.Video.ENDED&&t.video.play(),t.handleAnswered()}))):t.on("dnbEditorReady",(function(){t.dnb=t.editor.dnb,t.dnb.dialog.disableOverlay=!0})),this.video.pressToPlay||(this.currentState===Z.LOADED?this.addControls():this.addSplash()),e.attr("tabindex","-1");var i=function(e,n){var i=t.controls&&t.controls[n]?t.controls[n]:void 0;return!(void 0!==i&&"-1"!==i.attr("tabindex"))||"INPUT"===e.target.nodeName};E(e,[{key:T.M}],(function(e){i(e,"$volume")||t.toggleMute(!1)})),E(e,[{key:T.K}],(function(e){if(!i(e,"$play"))if(t.hasUncompletedRequiredInteractions()){var n=J(document.activeElement);t.showWarningMask().find(".h5p-button-back").click((function(){return n.focus()}))}else t.togglePlayPause()})),this.$container.append(J(this.accessibility.getInteractionAnnouncer())),this.currentState=Z.ATTACHED},Z.prototype.attachVideo=function(e){var t=this;this.video.attach(e);var n=function(){setTimeout((function(){t.init360Player(e)}),150)};this.video&&this.video.on?(this.video.on("containerLoaded",n),this.video.on("loaded",(function(){setTimeout((function(){t.init360Player(e)}),200)})),setTimeout(n,100)):setTimeout(n,500),this.justVideo||(this.$overlay=J('<div class="h5p-overlay h5p-ie-transparent-background"></div>').appendTo(e))},Z.prototype.init360Player=function(e){var t=this;if(!t.threeRenderer&&"undefined"!=typeof THREE){var n=e.find("video");if(0===n.length&&(n=e.closest(".h5p-interactive-360-video").find("video")),0===n.length)return t._init360RetryCount||(t._init360RetryCount=0),t._init360RetryCount<10?(t._init360RetryCount++,void setTimeout((function(){t.init360Player(e)}),200)):void 0;var i=n[0];t.threeVideoElement=i,i.hasAttribute("crossorigin")||i.setAttribute("crossorigin","anonymous"),n.css({position:"absolute",visibility:"hidden",opacity:"0",width:"1px",height:"1px","pointer-events":"none","z-index":"-1"});var o=e.width()||640,r=e.height()||360;t.threeScene=new THREE.Scene,t.threeCamera=new THREE.PerspectiveCamera(75,o/r,.1,2e3),t.threeCamera.position.set(0,0,0);var s=new THREE.SphereGeometry(500,60,40);s.scale(-1,1,1),t.threeVideoTexture=new THREE.VideoTexture(i),t.threeVideoTexture.minFilter=THREE.LinearFilter,t.threeVideoTexture.magFilter=THREE.LinearFilter,t.threeVideoTexture.format=THREE.RGBFormat;var a=new THREE.MeshBasicMaterial({map:t.threeVideoTexture});t.threeSphere=new THREE.Mesh(s,a),t.threeScene.add(t.threeSphere),t.threeRenderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),t.threeRenderer.setSize(o,r),t.threeRenderer.setPixelRatio(window.devicePixelRatio),t.threeCanvas=t.threeRenderer.domElement,J(t.threeCanvas).css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%","z-index":"0","pointer-events":"auto"}),e.prepend(t.threeCanvas),t.cameraRotation={x:0,y:Math.PI},t.raycaster=new THREE.Raycaster,t.mouse=new THREE.Vector2,t.setupCameraControls(e),void 0!==t.editor&&t.setupEditorDropHandler(),t.animate(),i.addEventListener&&(i.addEventListener("play",(function(){t.threeVideoTexture&&(t.threeVideoTexture.needsUpdate=!0)})),i.addEventListener("timeupdate",(function(){t.threeVideoTexture&&(t.threeVideoTexture.needsUpdate=!0)})),i.addEventListener("loadedmetadata",(function(){t.$videoWrapper&&t.trigger("resize")}))),setTimeout((function(){t.$videoWrapper&&t.trigger("resize")}),100)}},Z.prototype.setupCameraControls=function(e){var t=this,n=function(e){if(t.cameraControlsEnabled&&!t.draggingMarker){var n=e.target;J(n).closest(".h5p-overlay, .h5p-interaction, .h5p-controls, .h5p-splash").length||(t.isDragging=!0,t.previousMousePosition={x:e.clientX,y:e.clientY},e.preventDefault())}},i=function(e){if(t.cameraControlsEnabled&&!t.draggingMarker&&t.isDragging){var n=e.clientX-t.previousMousePosition.x,i=e.clientY-t.previousMousePosition.y;t.cameraRotation.y+=.002*n,t.cameraRotation.x+=.002*i,t.cameraRotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,t.cameraRotation.x)),t.previousMousePosition={x:e.clientX,y:e.clientY},e.preventDefault()}},o=function(e){t.draggingMarker||(t.isDragging=!1)},r=function(e){if(t.cameraControlsEnabled&&!t.draggingMarker&&1===e.touches.length){var n=e.touches[0],i=e.target;J(i).closest(".h5p-overlay, .h5p-interaction, .h5p-controls, .h5p-splash").length||(t.isDragging=!0,t.previousMousePosition={x:n.clientX,y:n.clientY},e.preventDefault())}},s=function(e){if(t.cameraControlsEnabled&&!t.draggingMarker&&t.isDragging&&1===e.touches.length){var n=e.touches[0],i=n.clientX-t.previousMousePosition.x,o=n.clientY-t.previousMousePosition.y;t.cameraRotation.y+=.002*i,t.cameraRotation.x+=.002*o,t.cameraRotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,t.cameraRotation.x)),t.previousMousePosition={x:n.clientX,y:n.clientY},e.preventDefault()}},a=function(e){t.draggingMarker||(t.isDragging=!1)};e.on("mousedown",n),J(document).on("mousemove",i),J(document).on("mouseup",o),e.on("touchstart",r),J(document).on("touchmove",s),J(document).on("touchend",a),t.cleanupCameraControls=function(){e.off("mousedown",n),J(document).off("mousemove",i),J(document).off("mouseup",o),e.off("touchstart",r),J(document).off("touchmove",s),J(document).off("touchend",a)}},Z.prototype.resize360Player=function(e,t){this.threeRenderer&&this.threeCamera&&this.$videoWrapper&&e>0&&t>0&&(this.threeCamera.aspect=e/t,this.threeCamera.updateProjectionMatrix(),this.threeRenderer.setSize(e,t))},Z.prototype.animate=function(){var e=this;if(e.threeRenderer&&e.threeScene&&e.threeCamera){if(e.threeCamera){var t=new THREE.Euler(e.cameraRotation.x,e.cameraRotation.y,0,"YXZ");e.threeCamera.quaternion.setFromEuler(t)}e.threeRenderer.render(e.threeScene,e.threeCamera),e.threeVideoTexture&&(e.threeVideoTexture.needsUpdate=!0),e.updateInteractionPositions(),e.animationFrameId=requestAnimationFrame((function(){e.animate()}))}},Z.prototype.updateInteractionPositions=function(){var e=this;if(e.threeScene&&e.threeCamera&&e.interactions)for(var t=0;t<e.interactions.length;t++){var n=e.interactions[t];if(n){var i=n.getElement();if(i&&i.length){var o=ne(e.options,t);if(o)if(!!ee(e,o)||n.isVisible&&n.isVisible()){if(void 0===e.editor&&!0===o.dynamic)if(!(o.keyframes&&Array.isArray(o.keyframes)&&o.keyframes.length>0)){i.css({display:"none"});continue}var r=o.yaw,s=o.pitch;if(void 0!==r&&void 0!==s){if(void 0===e.editor&&!0===o.dynamic&&o.keyframes&&Array.isArray(o.keyframes)&&o.keyframes.length>0){for(var a=e.video.getCurrentTime(),c=o.keyframes,l=c.length,d=1/0,u=-1/0,h=0;h<l;h++)void 0!==c[h].time&&isFinite(c[h].time)&&(c[h].time<d&&(d=c[h].time),c[h].time>u&&(u=c[h].time));if(a>=d&&a<=u){var p=null,m=null;for(h=l-1;h>=0;h--)if(void 0!==c[h].time&&c[h].time<=a){p=c[h];break}for(h=0;h<l;h++)if(void 0!==c[h].time&&c[h].time>a){m=c[h];break}if(null===p&&null!==m)void 0!==m.yaw&&isFinite(m.yaw)&&(r=m.yaw),void 0!==m.pitch&&isFinite(m.pitch)&&(s=m.pitch);else if(null!==p&&null===m)void 0!==p.yaw&&isFinite(p.yaw)&&(r=p.yaw),void 0!==p.pitch&&isFinite(p.pitch)&&(s=p.pitch);else if(null!==p&&null!==m){var v=p.time,f=m.time,b=void 0!==p.yaw&&isFinite(p.yaw)?p.yaw:r,g=void 0!==p.pitch&&isFinite(p.pitch)?p.pitch:s,y=void 0!==m.yaw&&isFinite(m.yaw)?m.yaw:r,k=f-v,S=k>0?(a-v)/k:0;s=g+((void 0!==m.pitch&&isFinite(m.pitch)?m.pitch:s)-g)*(S=Math.max(0,Math.min(1,S)));var $=y-b;$>Math.PI?$-=2*Math.PI:$<-Math.PI&&($+=2*Math.PI),r=b+$*S,(r%=2*Math.PI)<0&&(r+=2*Math.PI)}}}var C=500*Math.sin(s),w=-500*Math.cos(s)*Math.sin(r),T=-500*Math.cos(s)*Math.cos(r),x=new THREE.Vector3(w,C,T);if(x.project(e.threeCamera),x.z>1)i.css({display:"none"});else{var P=(M=i.hasClass("h5p-moving")||i.closest(".h5p-dragnbar-element.h5p-moving").length>0||i.parent().hasClass("h5p-moving"))?.5:1;i.css({display:"",visibility:"visible",opacity:P,"pointer-events":M?"none":"auto"});var E=(x.x+1)/2*100,I=(1-x.y)/2*100,M=i.hasClass("h5p-moving")||i.closest(".h5p-dragnbar-element.h5p-moving").length>0||i.parent().hasClass("h5p-moving"),B=!1;if(o.action&&o.action.library)B="H5P.Link"===o.action.library.split(" ")[0];var A={left:E+"%",top:I+"%"};B&&(A.width="auto",A.height="auto"),i.css(A)}}}else i.css({display:"none"})}}}},Z.prototype.regenerateYawPitch=function(e,t,n){var i=this;if(i.threeCamera&&e){var o=e.getElement();if(o&&o.length){var r=te(i.interactions,e);if(-1!==r){var s=ne(i.options,r);if(s){var a=t,c=n;if(!(void 0!==a&&void 0!==c)){var l=o.css("left")||"",d=o.css("top")||"";a=50,c=50,-1!==l.indexOf("%")&&(a=parseFloat(l.replace("%",""))||50),-1!==d.indexOf("%")&&(c=parseFloat(d.replace("%",""))||50)}var u=(a=Math.max(0,Math.min(100,a)))/100*2-1,h=-((c=Math.max(0,Math.min(100,c)))/100*2-1);u=Math.max(-1,Math.min(1,u)),h=Math.max(-1,Math.min(1,h));var p=new THREE.Vector3(u,h,.5);p.unproject(i.threeCamera),p.normalize();var m=Math.asin(p.y),v=Math.atan2(-p.x,-p.z);(v%=2*Math.PI)<0&&(v+=2*Math.PI),s.yaw=v,s.pitch=m,e.yaw=v,e.pitch=m,e.trigger&&e.trigger("move",{yaw:v,pitch:m})}}}}},Z.prototype.setupEditorDropHandler=function(){var e=this;if(void 0!==e.editor&&e.threeScene&&e.threeCamera&&e.threeRenderer&&e.threeSphere&&e.raycaster){var t=function(t){setTimeout((function(){var n=null,i=-1;if(e.interactions&&e.interactions.length>0)for(var o=0;o<e.interactions.length;o++){var r=e.interactions[o];if(r){var s=r.getElement(),a=(h=ne(e.options,o))&&void 0!==h.yaw&&void 0!==h.pitch;if(s&&s.length&&!s.hasClass("h5p-dragging")&&!a){n=r,i=o;break}}}if(n&&-1!==i){var c=e.threeRenderer.domElement.getBoundingClientRect(),l=new THREE.Vector2;l.x=(t.clientX-c.left)/c.width*2-1,l.y=-(t.clientY-c.top)/c.height*2+1,e.raycaster.setFromCamera(l,e.threeCamera);var d=e.raycaster.intersectObject(e.threeSphere,!1);if(d.length>0){var u=d[0].point.clone();u.negate();var h,p=u.normalize(),m=Math.asin(p.y),v=Math.atan2(p.x,-p.z);(h=ne(e.options,i))&&(h.yaw=v,h.pitch=m,n.yaw=v,n.pitch=m,n.trigger&&n.trigger("move"))}}}),50)};document.addEventListener("mouseup",t),e.cleanupEditorDropHandler=function(){document.removeEventListener("mouseup",t)}}},Z.prototype.cleanup360Player=function(){var e=this;e.animationFrameId&&(cancelAnimationFrame(e.animationFrameId),e.animationFrameId=null),e.cleanupCameraControls&&e.cleanupCameraControls(),e.cleanupEditorDropHandler&&e.cleanupEditorDropHandler(),e.threeVideoTexture&&(e.threeVideoTexture.dispose(),e.threeVideoTexture=null),e.threeRenderer&&(e.threeRenderer.dispose(),e.threeCanvas&&e.threeCanvas.parentNode&&e.threeCanvas.parentNode.removeChild(e.threeCanvas),e.threeRenderer=null,e.threeCanvas=null),e.threeSphere&&(e.threeSphere.geometry&&e.threeSphere.geometry.dispose(),e.threeSphere.material&&e.threeSphere.material.dispose(),e.threeSphere=null),e.threeScene=null,e.threeCamera=null,e.raycaster=null,e.mouse=null},Z.prototype.addSplash=function(){var e=this;void 0!==this.editor||this.video.pressToPlay||!this.video.play||this.$splash||(this.$splash=J('<div class="h5p-splash-wrapper"><div class="h5p-splash-outer"><div class="h5p-splash" role="button" tabindex="0"><div class="h5p-splash-main"><div class="h5p-splash-main-outer"><div class="h5p-splash-main-inner"><div class="h5p-splash-play-icon" aria-label="'+this.l10n.play+'"></div><div class="h5p-splash-title">'+this.options.video.startScreenOptions.title+'</div></div></div></div><div class="h5p-splash-footer"><div class="h5p-splash-footer-holder"><div class="h5p-splash-description">'+e.startScreenOptions.shortStartDescription+"</div></div></div></div></div></div>").click((function(){e.video.play()})).appendTo(this.$overlay).find(".h5p-interaction-button").click((function(){return!1})).end(),J(".h5p-splash",this.$splash).keydown((function(t){P(t)&&(e.video.play(),t.preventDefault(),e.$controls.find(".h5p-play").focus())})),void 0!==this.startScreenOptions.shortStartDescription&&this.startScreenOptions.shortStartDescription.length||this.$splash.addClass("no-description"),this.startScreenOptions.hideStartTitle&&this.$splash.addClass("no-title"))},Z.prototype.getDuration=function(){return void 0===this.duration&&(this.duration=this.video.getDuration()),this.duration},Z.prototype.addControls=function(){var e=this;this.addSplash(),this.attachControls(this.$controls.removeClass("hidden"));var t=this.getDuration(),n=Z.humanizeTime(t),i=Z.formatTimeForA11y(t,this.l10n);if(this.controls.$totalTime.find(".human-time").html(n),this.controls.$totalTime.find(".hidden-but-read").html("".concat(this.l10n.totalTime," ").concat(i)),this.controls.$slider.slider("option","max",t),this.bookmarkMenuKeyboardControls=new b([new g]),this.bookmarkMenuKeyboardControls.on("close",(function(){return e.toggleBookmarksChooser(!1)})),this.endscreenMenuKeyboardControls=new b([new g]),this.endscreenMenuKeyboardControls.on("close",(function(){return e.toggleEndscreensChooser(!1)})),this.addSliderInteractions(),this.addBookmarks(),this.options.assets.endscreens&&this.options.assets.endscreens.length>0)for(var o=!1,r=this.getDuration(),s=this.options.assets.endscreens.length-1;s>=0;s--){this.options.assets.endscreens[s].time>r&&(o?(this.options.assets.endscreens.splice(s,1),this.trigger("endscreensChanged",{index:s,number:-1})):(this.options.assets.endscreens[s].time=r,this.options.assets.endscreens[s].label=Z.humanizeTime(r)+" "+this.l10n.endscreen,this.trigger("endscreensChanged",{index:s,number:1}),o=!0))}this.addEndscreenMarkers(),this.addBubbles(),this.trigger("controls")},Z.prototype.loaded=function(){var e=this.getDuration();if(this.oneSecondInPercentage=100/e,e=Math.floor(e),void 0!==this.editor){var t=oe("interactions",this.editor.field.fields),n=oe("duration",t.field.fields).fields;n[0].max=n[1].max=e,n[0].min=n[1].min=0;for(var i=oe("adaptivity",t.field.fields).fields,o=0;o<i.length;o++)i[o].fields&&(oe("seekTo",i[o].fields).max=e)}if(this.options.assets.interactions&&this.options.assets.interactions.length>0)for(o=this.options.assets.interactions.length-1;o>=0;o--)if(this.options.assets.interactions[o].duration.to>e){var r=this.options.assets.interactions[o].duration.to-this.options.assets.interactions[o].duration.from,s=e-r<=0?0:e-r;this.options.assets.interactions[o].duration.from=s,this.options.assets.interactions[o].duration.to=e}if(this.hasMainSummary()){var a=e-this.options.summary.displayAt;a<0&&(a=0),void 0===this.options.assets.interactions&&(this.options.assets.interactions=[]),this.options.assets.interactions.push({action:this.options.summary.task,x:80,y:80,duration:{from:a,to:e},displayType:"button",bigDialog:!0,className:"h5p-summary-interaction h5p-end-summary",label:"<p>"+this.l10n.summary+"</p>",mainSummary:!0}),this.initInteraction(this.options.assets.interactions.length-1)}this.currentState===Z.ATTACHED&&(this.video.pressToPlay||this.addControls(),this.trigger("resize")),this.currentState=Z.LOADED},Z.prototype.initInteraction=function(e){var t,n=this,i=n.options.assets.interactions[e];if(!0===i.dynamic&&i.keyframes&&Array.isArray(i.keyframes)&&i.keyframes.sort((function(e,t){return(e.time||0)-(t.time||0)})),n.override){var o={};i.adaptivity&&i.adaptivity.requireCompletion&&(o.enableRetry=!0),H5P.jQuery.extend(i.action.params.behaviour,n.override,o)}void 0!==n.previousState&&void 0!==n.previousState.answers&&null!==n.previousState.answers[e]&&(t=n.previousState.answers[e]);var r=new L(i,n,t);return r.on("display",(function(e){var t=e.data;t.appendTo(n.$overlay),r.repositionToWrapper(n.$videoWrapper),n.threeScene&&n.threeCamera&&t.css({visibility:"hidden","pointer-events":"none"});var i=void 0!==n.video.pressToPlay;re(i?100:null,(function(){(n.currentState===H5P.Video.PLAYING||n.currentState===H5P.Video.BUFFERING)&&r.pause()&&(n.focusInteraction||(n.focusInteraction=r),n.video.pause())})),n.seekingTo&&(n.seekingTo=void 0,t.focus()),setTimeout((function(){r.positionLabel(n.$videoWrapper.width())}),0),n.toggleEndscreen(!1)})),r.on("hide",(function(){n.handleAnswered()})),r.on("xAPI",(function(e){var t=e.getVerb();"interacted"===t&&this.setProgress(L.PROGRESS_INTERACTED),-1!==J.inArray(t,["completed","answered"])&&e.setVerb("answered"),void 0===e.data.statement.context.extensions&&(e.data.statement.context.extensions={}),e.data.statement.context.extensions["http://id.tincanapi.com/extension/ending-point"]="PT"+Math.floor(n.video.getCurrentTime())+"S"})),n.interactions.push(r),r},Z.prototype.handleAnswered=function(){var e=this;e.interactions.forEach((function(t){t.getProgress()===L.PROGRESS_INTERACTED&&(t.setProgress(L.PROGRESS_ANSWERED),t.$menuitem.addClass("h5p-interaction-answered"),e.hasStar&&(e.playStarAnimation(),e.playBubbleAnimation(e.l10n.answered.replace("@answered","<strong>"+e.getAnsweredTotal()+"</strong>")),e.endscreen.update(e.interactions)))}))},Z.prototype.getAnsweredTotal=function(){return this.interactions.filter((function(e){return e.getProgress()===L.PROGRESS_ANSWERED})).length},Z.prototype.hasMainSummary=function(){var e=this.options.summary;return!(void 0===e||void 0===e.displayAt||void 0===e.task||void 0===e.task.params||void 0===e.task.params.summaries||!e.task.params.summaries.length||void 0===e.task.params.summaries[0].summary||!e.task.params.summaries[0].summary.length)},Z.prototype.addSliderInteractions=function(){var e=this,t=this;this.controls&&this.controls.$interactionsContainer&&(this.controls.$interactionsContainer.children().remove(),this.interactionKeyboardControls&&(this.interactionKeyboardControls.elements=[]),H5P.jQuery.extend([],this.interactions).sort((function(e,t){return e.getDuration().from-t.getDuration().from})).forEach((function(n){var i=te(t.interactions,n),o=ne(t.options,i);if(void 0===t.editor||!o||!0!==o.dynamic){var r=n.addDot();t.menuitems.push(r),void 0===t.previousState&&t.interactionsProgress.push(void 0),t.interactionsProgress[t.menuitems.length-1]===L.PROGRESS_ANSWERED&&(n.setProgress(t.interactionsProgress[t.menuitems.length-1]),r.addClass("h5p-interaction-answered")),void 0!==r&&(r.appendTo(e.controls.$interactionsContainer),"both"!==t.preventSkippingMode&&e.interactionKeyboardControls.addElement(r.get(0)))}})),t.interactionKeyboardControls.on("afterNextElement",(function(t){return e.handleInteractionTabIndex(t)})),t.interactionKeyboardControls.on("afterPreviousElement",(function(t){return e.handleInteractionTabIndex(t)})),void 0!==t.editor&&t.addKeyframeMarkers())},Z.prototype.addKeyframeMarkers=function(){var e=this;if(void 0!==e.editor&&e.controls){e.controls.$keyframesContainer||(e.controls.$keyframesContainer=J("<div/>",{role:"menu",class:"h5p-keyframes-container","aria-label":"Keyframes"}),e.$sliderContainer&&e.controls.$keyframesContainer.appendTo(e.$sliderContainer)),e.controls.$keyframesContainer.children().remove();var t=new Set,n=null;if(e.editor&&e.editor.params&&e.editor.params.interactions?n=e.editor.params.interactions:e.options&&e.options.assets&&e.options.assets.interactions&&(n=e.options.assets.interactions),n){for(var i=0;i<e.interactions.length;i++){if(e.interactions[i]){var o=n[i]||null;o&&!0===o.dynamic&&o.keyframes&&Array.isArray(o.keyframes)&&o.keyframes.length>0&&o.keyframes.forEach((function(e){void 0!==e.time&&null!==e.time&&isFinite(e.time)&&t.add(e.time)}))}}var r=Array.from(t).sort((function(e,t){return e-t}));if(void 0===e.oneSecondInPercentage||null===e.oneSecondInPercentage){var s=e.getDuration();if(!(s>0))return;e.oneSecondInPercentage=100/s}r.forEach((function(t){var n=H5P.Interactive360Video?H5P.Interactive360Video.humanizeTime(t):t.toFixed(2)+"s",i=J("<div/>",{role:"menuitem",class:"h5p-seekbar-keyframe","aria-label":"Keyframe. "+n,title:"Keyframe at "+n,css:{left:t*e.oneSecondInPercentage+"%"},on:{click:function(n){n.preventDefault(),n.stopPropagation(),e.seekToKeyframe(t)},keydown:function(n){if(13===n.which||32===n.which)return n.preventDefault(),n.stopPropagation(),e.seekToKeyframe(t),!1}}});e.preventSkipping&&i.attr("aria-disabled","true").attr("tabindex","-1"),e.controls.$keyframesContainer&&(i.appendTo(e.controls.$keyframesContainer),"both"!==e.preventSkippingMode&&e.interactionKeyboardControls&&e.interactionKeyboardControls.addElement(i.get(0)))}))}}},Z.prototype.seekToKeyframe=function(e){var t=this;t.isSkippingProhibited(e)?t.showPreventSkippingMessage({x:e/t.video.getDuration()*t.controls.$slider.get(0).offsetWidth,y:13},t.l10n.navForwardDisabled):Math.floor(10*t.video.getCurrentTime())!==Math.floor(10*e)&&(t.currentState===H5P.Video.VIDEO_CUED?(t.play(),t.seek(e)):t.currentState===H5P.Video.PLAYING?t.seek(e):(t.play(),t.seek(e),t.pause()))},Z.prototype.handleInteractionTabIndex=function(e){e.element.removeAttribute("tabindex")},Z.prototype.closePopupMenus=function(e){this.popupMenuButtons.forEach((function(t){void 0!==t&&t!==e&&void 0===t.attr("aria-disabled")&&"true"===t.attr("aria-expanded")&&t.click()}))},Z.prototype.displayBookmarks=function(){return this.options.assets.bookmarks&&this.options.assets.bookmarks.length&&"both"!==this.preventSkippingMode},Z.prototype.addBookmarks=function(){if(this.bookmarksMap={},void 0!==this.options.assets.bookmarks&&"both"!==this.preventSkippingMode)for(var e=0;e<this.options.assets.bookmarks.length;e++)this.addBookmark(e)},Z.prototype.addEndscreenMarkers=function(){if(this.endscreensMap={},void 0!==this.options.assets.endscreens)for(var e=0;e<this.options.assets.endscreens.length;e++)this.addEndscreen(e);this.editor&&this.editor.freshVideo&&(this.endscreensMap[this.getDuration()]||this.editor.addEndscreen(this.getDuration(),!0))},Z.prototype.addBubbles=function(){var e=this;!this.editor&&this.hasStar&&(this.bubbleScore=new K(this.$star),this.endscreen=new X(this,{l10n:{title:this.l10n.endcardTitle,information:this.l10n.endcardInformation,informationOnSubmitButtonDisabled:this.l10n.endcardInformationOnSubmitButtonDisabled,informationNoAnswers:this.l10n.endcardInformationNoAnswers,informationMustHaveAnswer:this.l10n.endcardInformationMustHaveAnswer,submitButton:this.l10n.endcardSubmitButton,submitMessage:this.l10n.endcardSubmitMessage,tableRowAnswered:this.l10n.endcardTableRowAnswered,tableRowScore:this.l10n.endcardTableRowScore,answeredScore:this.l10n.endcardAnsweredScore,tableRowSummary:this.l10n.endCardTableRowSummary,tableRowSummaryWithoutScore:this.l10n.endCardTableRowSummaryWithoutScore}}),this.endscreen.update(this.interactions),this.bubbleEndscreen=new K(this.$star,{content:this.endscreen.getDOM(),focus:function(){return e.endscreen.focus()},maxWidth:"auto",style:"h5p-interactive-360-video-bubble-endscreen",mode:"full"}))},Z.prototype.toggleBookmarksChooser=function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialLoad:!1,keepStopped:!1,firstPlay:!1};if(null!==(t=this.controls)&&void 0!==t&&t.$bookmarksButton){e=void 0===e?!this.controls.$bookmarksChooser.hasClass("h5p-show"):e;var o=this.controls.$bookmarksChooser.hasClass("h5p-show");this.controls.$minimalOverlay.toggleClass("h5p-show",e),this.controls.$minimalOverlay.find(".h5p-minimal-button").toggleClass("h5p-hide",e),this.controls.$bookmarksButton.attr("aria-expanded",!!e&&"true"),this.controls.$more.attr("aria-expanded",e?"true":"false"),this.controls.$bookmarksChooser.css({maxHeight:e?this.controlsCss.maxHeight:"32px"}).toggleClass("h5p-show",e).toggleClass("h5p-transitioning",e||o)}e?(this.closePopupMenus(this.controls.$bookmarksButton),this.showBookmarksmenuOnLoad&&i.initialLoad||this.controls.$bookmarksChooser[0].addEventListener("transitionend",(function(){n.controls.$bookmarksChooser.find('[tabindex="0"]').first().focus()}),{once:!0}),this.editor&&(this.interruptVideo(),this.updateChooserTime(this.controls.$bookmarksChooser,".h5p-add-bookmark"))):i.firstPlay||(this.editor&&!i.keepStopped&&this.resumeVideo(),this.controls.$bookmarksChooser.hasClass("h5p-show")||this.controls.$bookmarksButton.focus())},Z.prototype.toggleEndscreensChooser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keepStopped:!1,firstPlay:!1};if(this.editor&&this.controls.$endscreensButton){e=void 0===e?!this.controls.$endscreensChooser.hasClass("h5p-show"):e;var n=this.controls.$endscreensChooser.hasClass("h5p-show");this.controls.$minimalOverlay.toggleClass("h5p-show",e),this.controls.$minimalOverlay.find(".h5p-minimal-button").toggleClass("h5p-hide",e),this.controls.$endscreensButton.attr("aria-expanded",e?"true":"false").toggleClass("h5p-star-active-editor",e),this.controls.$more.attr("aria-expanded",e?"true":"false");var i=-10+Math.min(0,this.$container.outerWidth()-this.controls.$endscreensChooser.parent().offset().left-this.controls.$endscreensChooser.outerWidth())+"px";this.controls.$endscreensChooser.css({maxHeight:e?this.controlsCss.maxHeight:"32px"}).css({left:i}).toggleClass("h5p-show",e).toggleClass("h5p-transitioning",e||n)}e?(this.closePopupMenus(this.controls.$endscreensButton),this.editor&&(this.interruptVideo(),this.updateChooserTime(this.controls.$endscreensChooser,".h5p-add-endscreen")),this.controls.$endscreensChooser.find('[tabindex="0"]').first().focus()):t.firstPlay||(this.editor&&!t.keepStopped&&this.resumeVideo(),this.controls.$endscreensChooser.hasClass("h5p-show")||this.controls.$endscreensButton.focus())},Z.prototype.updateChooserTime=function(e,t){var n=e.find(t);n.html(n.data("default").replace("@timecode",Z.humanizeTime(this.video.getCurrentTime())))},Z.prototype.interruptVideo=function(){this.currentState===H5P.Video.PLAYING&&(this.interruptedTemporarily=!0,this.video.pause())},Z.prototype.resumeVideo=function(e){if(!e){if(!this.interruptedTemporarily)return;if(this.popupMenuChoosers.some((function(e){return e.hasClass("h5p-show")})))return}this.interruptedTemporarily=!1,this.video.play()},Z.prototype.toggleEndscreen=function(e){var t,n;!this.editor&&this.hasStar&&e!==(null===(t=this.bubbleEndscreen)||void 0===t?void 0:t.isActive())&&null!==(n=this.controls)&&void 0!==n&&n.$endscreensButton&&((e=void 0===e?!this.bubbleEndscreen.isActive():e)?(this.disableTabIndexes(".h5p-interactive-360-video-endscreen"),this.stateBeforeEndscreen=this.currentState,this.video.pause(),this.endscreen.update(this.interactions)):(this.restoreTabIndexes(),this.controls.$endscreensButton.focus(),this.stateBeforeEndscreen===H5P.Video.PLAYING&&(this.video.play(),this.stateBeforeEndscreen=void 0)),this.controls.$endscreensButton.attr("aria-expanded",e),this.controls.$endscreensButton.toggleClass("h5p-star-active",e),this.bubbleEndscreen.toggle(e,!0))},Z.prototype.showPreventSkippingMessage=function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,r=this;if(i.x=null!==(e=i.x)&&void 0!==e?e:0,i.y="number"==typeof i.y?25-i.y:25,o=null!==(t=o)&&void 0!==t?t:r.l10n.navDisabled,!r.preventSkippingWarningTimeout){r.$preventSkippingMessage||(r.$preventSkippingMessage=J("<div>",{class:"h5p-prevent-skipping-message",appendTo:r.controls.$bookmarksContainer}),r.$preventSkippingMessage=J("<div>",{class:"h5p-prevent-skipping-message",appendTo:r.controls.$endscreensContainer}),r.$preventSkippingMessageText=J("<div>",{class:"h5p-prevent-skipping-message-text",html:o,appendTo:r.$preventSkippingMessage}),r.$preventSkippingMessageTextA11y=J("<div>",{class:"hidden-but-read",html:o,appendTo:r.controls.$slider}));var s=r.$preventSkippingMessage.innerWidth()-r.$preventSkippingMessage.width();r.$preventSkippingMessage.css("max-width","".concat(r.$videoWrapper.width()-s,"px"));var a=parseFloat(null!==(n=r.$preventSkippingMessage.css("transform").split(",")[4])&&void 0!==n?n:0),c=r.$sliderContainer.get(0).offsetLeft+r.controls.$slider.get(0).offsetLeft+i.x+a+r.$preventSkippingMessage.outerWidth(),l=Math.max(0,c-r.$container.width());i.x-=l,r.$preventSkippingMessage.toggleClass("h5p-overflow",l>0),r.$preventSkippingMessage.css("left",i.x),r.$preventSkippingMessage.css("bottom",i.y),setTimeout((function(){r.$preventSkippingMessage.addClass("h5p-show").attr("aria-hidden","false")}),0),r.preventSkippingWarningTimeout=setTimeout((function(){r.$preventSkippingMessage.removeClass("h5p-show").attr("aria-hidden","true"),setTimeout((function(){r.preventSkippingWarningTimeout=void 0}),500)}),2e3)}},Z.prototype.onBookmarkSelect=function(e,t){var n=this;if(this.isSkippingProhibited(t.time))this.showPreventSkippingMessage({x:t.time/n.video.getDuration()*n.controls.$slider.get(0).offsetWidth+2,y:-23},n.l10n.navForwardDisabled);else{n.currentState!==H5P.Video.PLAYING&&(e.mouseover().mouseout(),setTimeout((function(){n.timeUpdate(n.video.getCurrentTime())}),0)),"true"===n.controls.$more.attr("aria-expanded")&&n.$container.hasClass("h5p-minimal")?n.controls.$more.click():n.toggleBookmarksChooser(!1),n.video.play(),n.seek(t.time);var i=Z.formatTimeForA11y(t.time,n.l10n);setTimeout((function(){return n.read("".concat(n.l10n.currentTime," ").concat(i))}),150)}},Z.prototype.onEndscreenSelect=function(e,t){var n=this;n.currentState!==H5P.Video.PLAYING&&(e.mouseover().mouseout(),setTimeout((function(){n.timeUpdate(n.video.getCurrentTime())}),0)),"true"===n.controls.$more.attr("aria-expanded")&&n.$container.hasClass("h5p-minimal")?n.controls.$more.click():n.toggleEndscreensChooser(!1),n.video.play(),n.seek(t.time);var i=Z.formatTimeForA11y(t.time,n.l10n);setTimeout((function(){return n.read("".concat(n.l10n.currentTime," ").concat(i))}),150)},Z.prototype.addBookmark=function(e,t){var n=this,i=n.options.assets.bookmarks[e];void 0===t&&(t=Math.floor(10*i.time)/10);var o=n.bookmarksMap[t]=J('<div class="h5p-bookmark" style="left:'+i.time*n.oneSecondInPercentage+'%"><div class="h5p-bookmark-label"><div class="h5p-bookmark-text">'+i.label+"</div></div></div>").appendTo(n.controls.$bookmarksContainer).data("id",e).hover((function(){void 0!==n.bookmarkTimeout&&clearTimeout(n.bookmarkTimeout),n.controls.$bookmarksContainer.children(".h5p-show").removeClass("h5p-show"),o.addClass("h5p-show")}),(function(){n.bookmarkTimeout=setTimeout((function(){o.removeClass("h5p-show")}),n.editor?1e3:2e3)}));o.find(".h5p-bookmark-label").css("maxWidth",parseInt(n.controls.$slider.parent().css("marginRight"))-35),void 0===n.controls.$bookmarksList&&(n.controls.$bookmarksList=J('<ul role="menu"></ul>').insertAfter(n.controls.$bookmarksChooser.find("h2")));var r=J('<li role="menuitem" aria-describedby="'.concat(n.bookmarksMenuId,'">').concat(i.label,"</li>")).click((function(){return n.onBookmarkSelect(o,i)})).keydown((function(e){P(e)&&n.onBookmarkSelect(o,i),e.stopPropagation()}));n.bookmarkMenuKeyboardControls.addElement(r.get(0));var s=n.controls.$bookmarksList.children(":eq("+e+")");return 0!==s.length?r.insertBefore(s):r.appendTo(n.controls.$bookmarksList),n.on("bookmarksChanged",(function(i){var s=i.data.index,a=i.data.number;s===e&&a<0?(r.remove(),delete n.bookmarksMap[t]):e>=s&&(e+=a,o.data("id",e))})),n.trigger("bookmarkAdded",{bookmark:o}),o},Z.prototype.addEndscreen=function(e,t){var n,i=this,o=i.options.assets.endscreens[e];if(void 0===t&&(t=Math.floor(10*o.time)/10),!this.editor)return i.getDuration()-t<1&&(t=i.getDuration()),void(n=i.endscreensMap[t]=!0);n=i.endscreensMap[t]=J('<div class="h5p-endscreen" style="left:'+o.time*i.oneSecondInPercentage+'%"><div class="h5p-endscreen-label"><div class="h5p-endscreen-text">'+o.label+"</div></div></div>").appendTo(i.controls.$endscreensContainer).data("id",e).hover((function(){void 0!==i.endscreenTimeout&&clearTimeout(i.endscreenTimeout),i.controls.$endscreensContainer.children(".h5p-show").removeClass("h5p-show"),n.addClass("h5p-show")}),(function(){i.endscreenTimeout=setTimeout((function(){n.removeClass("h5p-show")}),i.editor?1e3:2e3)})),i.editor&&(i.endscreenTimeout=setTimeout((function(){n.removeClass("h5p-show")}),1e3)),n.find(".h5p-endscreen-label").css("maxWidth",parseInt(i.controls.$slider.parent().css("marginRight"))-35),void 0===i.controls.$endscreensList&&(i.controls.$endscreensList=J('<ul role="menu"></ul>').insertAfter(i.controls.$endscreensChooser.find("h2")));var r=J('<li role="menuitem" aria-describedby="'.concat(i.endscreensMenuId,'">').concat(o.label,"</li>")).click((function(){return i.onEndscreenSelect(n,o)})).keydown((function(e){P(e)&&i.onEndscreenSelect(n,o),e.stopPropagation()}));i.endscreenMenuKeyboardControls.addElement(r.get(0));var s=i.controls.$endscreensList.children(":eq("+e+")");return 0!==s.length?r.insertBefore(s):r.appendTo(i.controls.$endscreensList),i.on("endscreensChanged",(function(o){var s=o.data.index,a=o.data.number;s===e&&a<0?(r.remove(),delete i.endscreensMap[t]):e>=s&&(e+=a,n.data("id",e))})),i.trigger("endscreenAdded",{endscreen:n}),n},Z.prototype.attachControls=function(e){var t=this,n=J("<div/>",{class:"h5p-controls-left",appendTo:e});t.$sliderContainer=J("<div/>",{class:"h5p-control h5p-slider",appendTo:e}),t.hasStar&&(t.$star=J("<div/>",{class:"h5p-control h5p-star",appendTo:e}),t.$starBar=J("<div/>",{class:"h5p-control h5p-star h5p-star-bar",appendTo:t.$star}),J("<div/>",{class:"h5p-control h5p-star h5p-star-background",appendTo:t.$star}),t.$starAnimation=J("<div/>",{class:"h5p-control h5p-star h5p-star-animation h5p-star-animation-inactive",appendTo:t.$star}));var i=J("<div/>",{class:"h5p-controls-right",appendTo:e});"both"===t.preventSkippingMode&&t.setDisabled(t.$sliderContainer),t.controls={},t.controls.$play=t.createButton("play","h5p-control h5p-pause",n,t.togglePlayPause),t.showRewind10&&(t.controls.$rewind10=t.createButton("rewind10","h5p-control",n,(function(){if(t.video.getCurrentTime()>0){var e=Math.max(t.video.getCurrentTime()-10,0);t.seek(e),t.currentState===H5P.Video.PAUSED&&t.timeUpdate(e),t.currentState===H5P.Video.ENDED&&t.video.play()}})));var o=function(e,n){return function(){var i=t.controls[e],o=t.controls[n],r="true"===i.attr("aria-disabled"),s="true"===i.attr("aria-expanded");r||(s?(i.attr("aria-expanded","false"),o.hasClass("h5p-show")||i.focus(),o.removeClass("h5p-show"),function(){var e=t.$container.hasClass("h5p-minimal")&&"true"===t.controls.$more.attr("aria-expanded");e&&t.controls.$more.click()}(),t.resumeVideo()):(i.attr("aria-expanded","true"),o.addClass("h5p-show"),o.find('[tabindex="0"]').focus(),t.closePopupMenus(i)))}},r=t.editor||t.displayBookmarks();if(r&&(t.controls.$bookmarksChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-bookmarks",role:"dialog",html:'<h2 id="'.concat(t.bookmarksMenuId,'">').concat(t.l10n.bookmarks,"</h2>")}),t.popupMenuChoosers.push(t.controls.$bookmarksChooser),t.controls.$bookmarksChooser.append(J("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":t.l10n.close,click:function(){return t.toggleBookmarksChooser()},keydown:function(e){P(e)&&(t.toggleBookmarksChooser(),e.preventDefault())}})),t.showRewind10&&t.controls.$bookmarksChooser.addClass("h5p-rewind-displacement"),t.controls.$bookmarksButton=t.createButton("bookmarks","h5p-control",n,(function(){t.toggleBookmarksChooser()})),t.controls.$bookmarksButton.attr("aria-haspopup","true"),t.controls.$bookmarksButton.attr("aria-expanded","false"),t.controls.$bookmarksChooser.insertAfter(t.controls.$bookmarksButton),t.controls.$bookmarksChooser.bind("transitionend",(function(){t.controls.$bookmarksChooser.removeClass("h5p-transitioning")})),t.popupMenuButtons.push(t.controls.$bookmarksButton)),t.hasStar){var s=t.editor?"star h5p-star-foreground-editor":"star h5p-star-foreground",a=t.editor?function(){return t.toggleEndscreensChooser()}:function(){return t.toggleEndscreen()};t.controls.$endscreensButton=t.createButton(s,"h5p-control",t.$star,a),t.controls.$endscreensButton.attr("aria-label",t.l10n.summary).attr("aria-haspopup","dialog").attr("aria-expanded","false"),t.popupMenuButtons.push(t.controls.$endscreensButton)}t.editor&&(t.controls.$endscreensChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-endscreens",role:"dialog",html:'<h2 id="'.concat(t.endscreensMenuId,'">').concat(t.l10n.endscreens,"</h2>")}),t.popupMenuChoosers.push(t.controls.$endscreensChooser),t.controls.$endscreensChooser.append(J("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":t.l10n.close,click:function(){return t.toggleEndscreensChooser()},keydown:function(e){P(e)&&(t.toggleEndscreensChooser(),e.preventDefault())}})),t.hasStar&&(t.controls.$endscreensButton.attr("aria-haspopup","true").attr("aria-expanded","false"),t.controls.$endscreensChooser.insertAfter(t.controls.$endscreensButton).bind("transitionend",(function(){t.controls.$endscreensChooser.removeClass("h5p-transitioning")}))));var c='<time class="h5p-current">\n      <span class="hidden-but-read"></span>\n      <span class="human-time" aria-hidden="true">0:00</span>\n    </time>',l=J('<div class="h5p-control h5p-simple-time">'.concat(c,"</div>")).appendTo(n);t.controls.$currentTimeSimple=l.find(".human-time"),t.controls.$currentTimeA11ySimple=l.find(".hidden-but-read");var d=Z.formatTimeForA11y(0,t.l10n),u=J('<div class="h5p-control h5p-time">\n    '.concat(c,'\n    <span aria-hidden="true"> / </span>\n    <time class="h5p-total">\n      <span class="hidden-but-read">').concat(t.l10n.totalTime," ").concat(d,'</span>\n      <span class="human-time" aria-hidden="true">0:00</span>\n    </time>\n  </div>')).appendTo(i),h=u.find(".h5p-current");t.controls.$currentTime=h.find(".human-time"),t.controls.$currentTimeA11y=h.find(".hidden-but-read"),t.controls.$totalTime=u.find(".h5p-total"),t.updateCurrentTime(0);var p=function(){t.controls.$minimalOverlay.removeClass("h5p-show"),t.controls.$more.attr("aria-expanded","false"),t.controls.$more.focus(),setTimeout((function(){t.controls.$overlayButtons.removeClass("h5p-hide")}),150)};t.controls.$more=t.createButton("more","h5p-control",i,(function(){"true"===t.controls.$more.attr("aria-expanded")?p():(t.controls.$minimalOverlay.addClass("h5p-show"),t.controls.$more.attr("aria-expanded","true"),t.removeSplash(),setTimeout((function(){t.controls.$minimalOverlay.find('[tabindex="0"]').focus()}),150)),t.closePopupMenus()})),t.controls.$playbackRateChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-playbackRate",role:"dialog",html:'<h2 id="'.concat(t.playbackRateMenuId,'">').concat(t.l10n.playbackRate,"</h2>")}),t.popupMenuChoosers.push(t.controls.$playbackRateChooser);var m=function(){t.isMinimal?t.controls.$more.click():t.controls.$playbackRateButton.click(),t.resumeVideo()};t.controls.$playbackRateChooser.append(J("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":t.l10n.close,click:function(){return m()},keydown:function(e){P(e)&&(m(),e.preventDefault())}})),t.controls.$playbackRateButton=t.createButton("playbackRate","h5p-control",i,o("$playbackRateButton","$playbackRateChooser")),t.popupMenuButtons.push(t.controls.$playbackRateButton),t.setDisabled(t.controls.$playbackRateButton),t.controls.$playbackRateButton.attr("aria-haspopup","true"),t.controls.$playbackRateButton.attr("aria-expanded","false"),t.controls.$playbackRateChooser.insertAfter(t.controls.$playbackRateButton),-1===navigator.userAgent.indexOf("Android")&&-1===navigator.userAgent.indexOf("iPad")&&(t.controls.$volume=t.createButton("mute","h5p-control",i,t.toggleMute),t.deactivateSound&&(t.controls.$volume.addClass("h5p-muted").attr("aria-label",t.l10n.sndDisabled),t.setDisabled(t.controls.$volume))),t.deactivateSound&&t.video.mute(),t.video.isMuted()&&t.controls.$volume.addClass("h5p-muted").attr("aria-label",t.l10n.sndDisabled),t.controls.$qualityChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-quality",role:"dialog",html:'<h2 id="'.concat(t.qualityMenuId,'">').concat(t.l10n.quality,"</h2>")}),t.popupMenuChoosers.push(t.controls.$qualityChooser);var v=function(){t.isMinimal?t.controls.$more.click():t.controls.$qualityButton.click(),t.resumeVideo()};t.controls.$qualityChooser.append(J("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":t.l10n.close,click:function(){return v()},keydown:function(e){P(e)&&(v(),e.preventDefault())}})),t.controls.$qualityButton=t.createButton("quality","h5p-control",i,o("$qualityButton","$qualityChooser")),t.popupMenuButtons.push(t.controls.$qualityButton),t.setDisabled(t.controls.$qualityButton),t.controls.$qualityButton.attr("aria-haspopup","true"),t.controls.$qualityButton.attr("aria-expanded","false"),t.controls.$qualityChooser.insertAfter(t.controls.$qualityButton),t.editor||!1===H5P.fullscreenSupported||(t.controls.$fullscreen=t.createButton("fullscreen","h5p-control",i,(function(){t.toggleFullScreen()}))),t.controls.$minimalOverlay=H5P.jQuery("<div/>",{class:"h5p-minimal-overlay",appendTo:t.$container});var f=H5P.jQuery("<div/>",{role:"menu",class:"h5p-minimal-wrap",appendTo:t.controls.$minimalOverlay});t.minimalMenuKeyboardControls=new b([new g]),t.minimalMenuKeyboardControls.on("close",(function(){return p()})),t.controls.$overlayButtons=H5P.jQuery([]),r&&(t.controls.$bookmarkButtonMinimal=t.createButton("bookmarks","h5p-minimal-button",f,(function(){t.controls.$overlayButtons.addClass("h5p-hide"),t.toggleBookmarksChooser(!0)}),!0),t.controls.$bookmarkButtonMinimal.attr("role","menuitem"),t.controls.$bookmarkButtonMinimal.attr("tabindex","-1"),t.controls.$overlayButtons=t.controls.$overlayButtons.add(t.controls.$bookmarkButtonMinimal),t.minimalMenuKeyboardControls.addElement(t.controls.$bookmarkButtonMinimal.get(0))),t.controls.$qualityButtonMinimal=t.createButton("quality","h5p-minimal-button",f,(function(){t.isDisabled(t.controls.$qualityButton)||(t.controls.$overlayButtons.addClass("h5p-hide"),t.controls.$qualityButton.click())}),!0),t.setDisabled(t.controls.$qualityButtonMinimal),t.controls.$qualityButtonMinimal.attr("role","menuitem"),t.controls.$overlayButtons=t.controls.$overlayButtons.add(t.controls.$qualityButtonMinimal),t.minimalMenuKeyboardControls.addElement(t.controls.$qualityButtonMinimal.get(0)),t.controls.$playbackRateButtonMinimal=t.createButton("playbackRate","h5p-minimal-button",f,(function(){t.isDisabled(t.controls.$playbackRateButton)||(t.controls.$overlayButtons.addClass("h5p-hide"),t.controls.$playbackRateButton.click())}),!0),t.controls.$playbackRateButtonMinimal.attr("role","menuitem"),t.setDisabled(t.controls.$playbackRateButtonMinimal),t.controls.$overlayButtons=t.controls.$overlayButtons.add(t.controls.$playbackRateButtonMinimal),t.minimalMenuKeyboardControls.addElement(t.controls.$playbackRateButtonMinimal.get(0)),t.addQualityChooser(),t.addPlaybackRateChooser(),t.interactionKeyboardControls=new b([new g]),t.controls.$interactionsContainer=J("<div/>",{role:"menu",class:"h5p-interactions-container","aria-label":t.l10n.interaction}),t.controls.$keyframesContainer=J("<div/>",{role:"menu",class:"h5p-keyframes-container","aria-label":"Keyframes"}),t.controls.$bookmarksContainer=J("<div/>",{class:"h5p-bookmarks-container",appendTo:t.$sliderContainer}),t.controls.$endscreensContainer=J("<div/>",{class:"h5p-endscreens-container",appendTo:t.$sliderContainer}),t.hasPlayPromise=!1,t.hasQueuedPause=!1,t.delayed=!1,t.controls.$slider=J("<div/>",{appendTo:t.$sliderContainer}).slider({value:0,step:.01,orientation:"horizontal",range:"min",max:0,create:function(e){var n=J(e.target).find(".ui-slider-handle");n.attr("role","slider").attr("aria-valuemin","0").attr("aria-valuemax",t.getDuration().toString()).attr("aria-valuetext",Z.formatTimeForA11y(0,t.l10n)).attr("aria-valuenow","0").attr("aria-label",t.l10n.videoProgressBar).attr("tabindex","0"),"both"===t.preventSkippingMode&&t.setDisabled(n).attr("aria-hidden","true")},start:function(){t.currentState!==Z.SEEKING&&(t.toggleEndscreen(!1),t.delayedState||(t.currentState===H5P.Video.ENDED?t.lastState=H5P.Video.PLAYING:t.currentState===H5P.Video.BUFFERING&&t.lastState||(t.lastState=t.currentState)),t.delayedState=!0,clearTimeout(t.delayTimeout),t.delayTimeout=setTimeout((function(){t.delayedState=!1}),200),t.hasPlayPromise?t.hasQueuedPause=!0:t.video.pause(),t.currentState=Z.SEEKING,t.removeSplash(),t.$overlay.addClass("h5p-visible"))},slide:function(e,n){var i=x(e,[T.ARROW_LEFT,T.ARROW_RIGHT]),o=n.value;if(t.isSkippingProhibited(o)&&(o=t.maxTimeReached),i){var r=x(e,[T.ARROW_RIGHT]),s=t.getDuration();o=r?Math.min(o+5,s):Math.max(o-5,0),t.isSkippingProhibited(o)&&(o=t.maxTimeReached),t.timeUpdate(o,!0)}return t.seek(o),t.updateInteractions(o),t.updateCurrentTime(o),!i},stop:function(e,n){t.currentState=t.lastState;var i=t.isSkippingProhibited(n.value)?t.maxTimeReached:n.value;t.seek(i),t.recreateCurrentInteractions();var o=t.lastState===H5P.Video.PLAYING||t.lastState===H5P.Video.VIDEO_CUED||t.hasQueuedPause;if(t.hasPlayPromise)t.hasQueuedPause=!1;else if(o){t.hasQueuedPause=!1;var r=t.video.play();t.hasQueuedPause=!1,r&&r.then?(t.hasPlayPromise=!0,r.then((function(){setTimeout((function(){(t.hasQueuedPause||t.hasActivePauseInteraction())&&t.video.pause(),t.hasPlayPromise=!1}),0)}))):t.hasActivePauseInteraction()?(t.video.play(),setTimeout((function(){t.video.pause()}),50)):t.timeUpdate(i)}else t.timeUpdate(i);t.isSkippingProhibited(n.value)&&(t.showPreventSkippingMessage({x:n.value/t.video.getDuration()*t.controls.$slider.get(0).offsetWidth},t.l10n.navForwardDisabled),t.setSliderPosition(i)),t.$overlay.removeClass("h5p-visible"),t.editor&&(t.updateChooserTime(t.controls.$bookmarksChooser,".h5p-add-bookmark"),t.updateChooserTime(t.controls.$endscreensChooser,".h5p-add-endscreen"))}}),t.controls.$interactionsContainer.appendTo(t.$sliderContainer),t.controls.$keyframesContainer&&t.controls.$keyframesContainer.appendTo(t.$sliderContainer),"both"===t.preventSkippingMode&&(t.controls.$slider.slider("disable"),t.controls.$slider.parent().click((function(e){var n=t.menuitems.map((function(e){return e.get(0)})).includes(e.target)?e.target.offsetLeft:e.offsetX;return t.showPreventSkippingMessage({x:n,y:-13}),!1}))),t.displayBookmarks()&&t.showBookmarksmenuOnLoad&&!1===t.video.pressToPlay&&t.toggleBookmarksChooser(!0,{initialLoad:!0}),t.controls.$buffered=J("<div/>",{class:"h5p-buffered",prependTo:t.controls.$slider})},Z.prototype.playStarAnimation=function(){var e=this;this.$starAnimation.hasClass("h5p-star-animation-inactive")&&(this.$starAnimation.removeClass("h5p-star-animation-inactive").addClass("h5p-star-animation-active"),setTimeout((function(){e.$starAnimation.removeClass("h5p-star-animation-active").addClass("h5p-star-animation-inactive")}),1e3))},Z.prototype.playBubbleAnimation=function(e){this.bubbleScore.setContent(e),this.bubbleScore.animate()},Z.prototype.hasActivePauseInteraction=function(){var e=!1;return this.interactions.forEach((function(t){t.getElement()&&t.pause()&&(e=!0)})),e},Z.prototype.createButton=function(e,t,n,i,o){var r={role:"button",tabindex:0,class:(void 0===t?"":t+" ")+"h5p-"+e,on:{click:function(){i.call(this)},keydown:function(e){P(e)&&(i.call(this),e.preventDefault(),e.stopPropagation())}},appendTo:n};return r[o?"text":"aria-label"]=this.l10n[e],H5P.jQuery("<div/>",r)},Z.prototype.addQualityChooser=function(){var e,t=this;if(t.qualityMenuKeyboardControls=new b([new g]),t.qualityMenuKeyboardControls.on("close",(function(){return t.controls.$qualityButton.click()})),this.video.getQualities&&(t.qualities=this.video.getQualities(),t.qualities&&void 0!==(null===(e=this.controls)||void 0===e?void 0:e.$qualityButton)&&t.isDisabled(t.controls.$qualityButton))){var n=this.video.getQuality(),i=t.qualities;"YouTube"===this.video.getHandlerName()&&(i=i.filter((function(e){return e.name===n})));for(var o="",r=0;r<i.length;r++){var s=i[r],a=s.name===n;o+='<li role="menuitemradio" data-quality="'.concat(s.name,'" aria-checked="').concat(a,'" aria-describedby="').concat(t.qualityMenuId,'">').concat(s.label,"</li>")}var c=J('<ul role="menu">'.concat(o,"</ul>")).appendTo(this.controls.$qualityChooser);c.children().click((function(){var e=J(this).attr("data-quality");t.updateQuality(e)})).keydown((function(e){if(P(e)){var n=J(this).attr("data-quality");t.updateQuality(n)}e.stopPropagation()})),c.find("li").get().forEach((function(e){t.qualityMenuKeyboardControls.addElement(e);var n="true"===e.getAttribute("aria-checked");ie(e,n)})),t.removeDisabled(this.controls.$qualityButton.add(this.controls.$qualityButtonMinimal))}},Z.prototype.updateQuality=function(e){var t=this;t.video.setQuality(e),"true"===t.controls.$more.attr("aria-expanded")?t.controls.$more.click():(t.controls.$qualityButton.click(),t.controls.$qualityButton.focus())},Z.prototype.addPlaybackRateChooser=function(){var e,t=this,n=this;if(this.playbackRateMenuKeyboardControls=new b([new g]),this.playbackRateMenuKeyboardControls.on("close",(function(){return n.controls.$playbackRateButton.click()})),this.video.getPlaybackRates){var i=this.video.getPlaybackRates();if(!(i.length<2)&&i&&void 0!==(null===(e=this.controls)||void 0===e?void 0:e.$playbackRateButton)&&n.isDisabled(this.controls.$playbackRateButton)){for(var o=this.video.getPlaybackRate(),r="",s=0;s<i.length;s++){var a=i[s],c=a===o;r+='<li role="menuitemradio" playback-rate="'.concat(a,'" aria-checked="').concat(c,'" aria-describedby="').concat(n.playbackRateMenuId,'">').concat(a,"</li>")}var l=J('<ul role="menu">'+r+"</ul>").appendTo(this.controls.$playbackRateChooser);l.children().click((function(){var e=J(this).attr("playback-rate");n.updatePlaybackRate(e)})).keydown((function(e){if(P(e)){var t=J(this).attr("playback-rate");n.updatePlaybackRate(t)}e.stopPropagation()})),l.find("li").get().forEach((function(e){t.playbackRateMenuKeyboardControls.addElement(e);var n="true"===e.getAttribute("aria-checked");ie(e,n)})),n.removeDisabled(this.controls.$playbackRateButton.add(this.controls.$playbackRateButtonMinimal))}}},Z.prototype.updatePlaybackRate=function(e){var t=this;t.video.setPlaybackRate(e),"true"===t.controls.$more.attr("aria-expanded")?t.controls.$more.click():t.controls.$playbackRateButton.click()},Z.prototype.startUpdatingBufferBar=function(){var e=this;if(!e.bufferLoop){!function t(){var n=e.video.getBuffered();n&&e.controls.$buffered&&(e.controls.$buffered.css("width",n+"%"),e.hasStar&&(n>99?e.$starBar.addClass("h5p-star-bar-buffered"):e.$starBar.removeClass("h5p-star-bar-buffered"))),e.bufferLoop=setTimeout(t,500)}()}},Z.prototype.resize=function(){if(this.$container){var e=this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen");this.$videoWrapper.css({marginTop:"",marginLeft:"",width:"",height:""}),this.video.trigger("resize");var t=this.$container.width(),n=this.justVideo?0:this.$controls.height(),i=this.$container.height(),o=16/9;this.threeVideoElement&&this.threeVideoElement.videoWidth&&this.threeVideoElement.videoHeight&&(o=this.threeVideoElement.videoWidth/this.threeVideoElement.videoHeight);var r,s=t/o;e?(s+n<=i?(r=s,t=this.$container.width(),this.$videoWrapper.css({width:t+"px",height:r+"px",marginTop:(i-n-r)/2+"px"}),void 0!==this.bubbleEndscreen&&this.bubbleEndscreen.fullscreen(!0,i,r)):(t=(r=i-n)*o,this.$videoWrapper.css({marginLeft:(this.$container.width()-t)/2+"px",width:t+"px",height:r+"px"}),void 0!==this.bubbleEndscreen&&this.bubbleEndscreen.fullscreen(!0)),this.video.trigger("resize")):(t=this.$container.width(),r=s,this.$videoWrapper.css({width:t+"px",height:r+"px"}),void 0!==this.bubbleEndscreen&&this.bubbleEndscreen.fullscreen()),this.scaledFontSize=t>this.width?this.fontSize*(t/this.width):this.fontSize,this.$container.css("fontSize",this.scaledFontSize+"px"),this.resize360Player(t,r),this.editor||(t<this.width?this.$container.hasClass("h5p-minimal")||this.$container.addClass("h5p-minimal"):this.$container.hasClass("h5p-minimal")&&this.$container.removeClass("h5p-minimal")),this.isMinimal=this.$container.hasClass("h5p-minimal");var a=this.$videoWrapper.height();if(this.controlsCss={bottom:"",maxHeight:a+"px"},e){var c=n;r+n<=i&&(c=n+(i-n-r)/2),this.controlsCss.bottom=c+"px"}this.controls&&this.controls.$minimalOverlay&&this.controls.$minimalOverlay.css(this.controlsCss),this.$container.find(".h5p-chooser").css(this.controlsCss),this.editor?this.editor.dnb&&this.editor.dnb.dnr.setContainerEm(this.scaledFontSize):(this.resizeMobileView(),void 0!==this.$splash&&this.resizeStartScreen()),this.showInteractionsAssistance(),this.bubbleScore&&(this.bubbleScore.update(),this.bubbleEndscreen.update()),this.resizeInteractions()}},Z.prototype.resizeMobileView=function(){if(!isNaN(this.currentState)){if(this.$container.width()/parseInt(this.$container.css("font-size"),10)<30){if(this.resizeInteractions(),!this.isMobileView){if(this.$container.addClass("mobile"),this.isMobileView=!0,this.hasUncompletedRequiredInteractions())J(".h5p-dialog",this.$container).show();else this.restoreTabIndexes(),this.dnb.dialog.closeOverlay();this.recreateCurrentInteractions()}}else if(this.isMobileView){if(this.dnb&&this.dnb.dialog&&!this.hasUncompletedRequiredInteractions())this.dnb.dialog.close(!0),this.$container.find(".h5p-dialog .h5p-image img").css({width:"",height:""});this.$container.removeClass("mobile"),this.isMobileView=!1,this.recreateCurrentInteractions()}}},Z.prototype.resizeInteractions=function(){if(!isNaN(this.currentState)){var e=this;this.interactions.forEach((function(t){t.resizeInteraction(),t.repositionToWrapper(e.$videoWrapper),t.positionLabel(e.$videoWrapper.width())}))}},Z.prototype.recreateCurrentInteractions=function(){void 0!==this.dnb&&this.dnb.blurAll(),this.interactions.forEach((function(e){e.reCreateInteraction()}))},Z.prototype.resizeStartScreen=function(){var e=50,t=!0,n=!0;void 0!==this.startScreenOptions.shortStartDescription&&this.startScreenOptions.shortStartDescription.length||(t=!1,this.startScreenOptions.hideStartTitle&&(n=!1,e=45));var i=J(".h5p-splash-description",this.$splash),o=J(".h5p-splash-title",this.$splash),r=i.clone().css("position","absolute").addClass("minimum-font-size").appendTo(i.parent()),s=o.clone().css("position","absolute").addClass("minimum-font-size").appendTo(o.parent()),a=parseInt(r.css("font-size"),10),c=parseInt(s.css("font-size"),10),l=this.$container.width(),d=parseInt(l/e,10);t||(n&&d<a?d=a:d<10&&(d=10)),l<510?this.$splash.addClass("mobile"):this.$splash.removeClass("mobile"),.8*d<a?i.addClass("minimum-font-size"):i.removeClass("minimum-font-size"),1.5*d<c?o.addClass("minimum-font-size"):o.removeClass("minimum-font-size"),this.$splash.css("font-size",d),r.remove(),s.remove()},Z.prototype.toggleFullScreen=function(){H5P.isFullscreen||this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen")?void 0!==H5P.exitFullScreen&&void 0!==H5P.fullScreenBrowserPrefix?H5P.exitFullScreen():(void 0===H5P.fullScreenBrowserPrefix?J(".h5p-disable-fullscreen").click():""===H5P.fullScreenBrowserPrefix?window.top.document.exitFullScreen():"ms"===H5P.fullScreenBrowserPrefix?window.top.document.msExitFullscreen():window.top.document[H5P.fullScreenBrowserPrefix+"CancelFullScreen"](),this.trigger("exitFullScreen")):(H5P.fullScreen(this.$container,this),void 0===H5P.exitFullScreen&&this.trigger("enterFullScreen")),this.resizeInteractions()},Z.prototype.timeUpdate=function(e,t){var n=this;n.currentTime=e,e>=0&&(this.maxTimeReached=Math.max(this.maxTimeReached,e),this.setSliderPosition(e)),n.updateInteractions(e),t||(this.timeUpdateTimeout=window.setTimeout((function(){(n.currentState===H5P.Video.PLAYING||n.currentState===H5P.Video.BUFFERING&&n.lastState===H5P.Video.PLAYING)&&n.timeUpdate(n.video.getCurrentTime())}),40))},Z.prototype.setSliderPosition=function(e){try{var t=this.controls.$slider.find(".ui-slider-handle"),n=Z.formatTimeForA11y(e,this.l10n);this.controls.$slider.slider("option","value",e),t.attr("aria-valuetext",n),t.attr("aria-valuenow",e.toString())}catch(e){return}},Z.prototype.updateInteractions=function(e){var t=this,n=Math.floor(10*e)/10;if(n!==t.lastTenth){void 0!==t.bookmarksMap&&void 0!==t.bookmarksMap[n]&&t.bookmarksMap[n].mouseover().mouseout();void 0!==t.endscreensMap&&void 0!==t.endscreensMap[n]&&t.currentState!==Z.SEEKING&&t.getAnsweredTotal()>0&&t.toggleEndscreen(!0)}t.lastTenth=n,t.toggleInteractions(e);var i=Math.floor(e);i!==t.lastSecond&&(t.currentState!==H5P.Video.PLAYING&&t.currentState!==H5P.Video.PAUSED||t.updateCurrentTime(i)),t.lastSecond=i},Z.prototype.updateCurrentTime=function(e){var t;if(null!==(t=this.controls)&&void 0!==t&&t.$currentTime){var n=this;e=Math.max(e,0);var i=Z.humanizeTime(e),o=Z.formatTimeForA11y(e,n.l10n);n.controls.$currentTime.html(i),n.controls.$currentTimeA11y.html("".concat(n.l10n.currentTime," ").concat(o)),n.controls.$currentTimeSimple.html(i),n.controls.$currentTimeA11ySimple.html("".concat(n.l10n.currentTime," ").concat(o))}},Z.prototype.getUsersScore=function(){for(var e=0,t=0;t<this.interactions.length;t++)this.interactions[t].score&&(e+=this.interactions[t].score);return e},Z.prototype.getUsersMaxScore=function(){for(var e=0,t=0;t<this.interactions.length;t++)this.interactions[t].maxScore&&(e+=this.interactions[t].maxScore);return e},Z.prototype.getScore=function(){return this.getUsersScore()},Z.prototype.getMaxScore=function(){return this.getUsersMaxScore()},Z.prototype.showOverlayMask=function(){var e=this;e.$videoWrapper.addClass("h5p-disable-opt-out"),e.disableTabIndexes(),e.dnb.dialog.openOverlay(),e.restorePosterTabIndexes(),e.$container.find(".h5p-dialog-wrapper").click((function(){e.hasUncompletedRequiredInteractions()&&e.showWarningMask()})),e.toggleFocusTrap()},Z.prototype.restorePosterTabIndexes=function(){var e=this;e.$overlay.find(".h5p-interaction.h5p-poster").each((function(){e.restoreTabIndexes(J(this))}))},Z.prototype.disableTabIndexes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".h5p-dialog-wrapper",t=this,n=t.$container.find(e);t.$tabbables=t.$container.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter((function(){var e=J(this),t=J.contains(n.get(0),e.get(0));if(e.data("tabindex"))return!0;if(!t){var i=e.attr("tabindex");return e.data("tabindex",i),e.attr("tabindex","-1"),!0}return!1}))},Z.prototype.restoreTabIndexes=function(e){var t=this;t.$tabbables&&(t.$tabbables.each((function(){var t=J(this),n=t.data("tabindex");if(e&&!J.contains(e.get(0),t.get(0)))return!0;t.hasClass("ui-slider-handle")?(t.attr("tabindex",0),t.removeData("tabindex")):void 0!==n?(t.attr("tabindex",n),t.removeData("tabindex")):t.removeAttr("tabindex")})),e||(t.$tabbables=void 0))},Z.prototype.toggleFocusTrap=function(){var e=this,t=this.getVisibleInteractions().filter((function(e){return e.getRequiresCompletion()&&!e.hasFullScore()}));t.length>0?this.$container.off("focusin").on("focusin",(function(n){return e.trapFocusInInteractions(t,J(n.target))})):this.$container.off("focusin","**")},Z.prototype.trapFocusInInteractions=function(e,t){var n=e.some((function(e){var n=e.getElement();return le(n,t)})),i=!!this.$mask&&le(this.$mask,t);if(!n&&!i){var o=e[0].getElement();o&&o.focus()}},Z.prototype.hideOverlayMask=function(){var e=this;return e.restoreTabIndexes(),e.dnb.dialog.closeOverlay(),e.$videoWrapper.removeClass("h5p-disable-opt-out"),e.toggleFocusTrap(),e.$container.find(".h5p-dialog-wrapper")},Z.prototype.showWarningMask=function(){var e=this,t="interactive-360-video-".concat(e.contentId,"-").concat(e.instanceIndex,"-completion-warning-text");return e.$mask||(e.$mask=J('<div class="h5p-warning-mask" role="alertdialog" aria-describedby="'.concat(t,'">\n        <div class="h5p-warning-mask-wrapper">\n          <div id="').concat(t,'" class="h5p-warning-mask-content">').concat(e.l10n.requiresCompletionWarning,'</div>\n          <button type="button" class="h5p-joubelui-button h5p-button-back">').concat(e.l10n.back,"</button>\n        </div>\n      </div>")).click((function(){e.$mask.hide()})).appendTo(e.$container)),e.$mask.show(),e.$mask.find(".h5p-button-back").focus(),e.$mask},Z.prototype.setDisabled=function(e){return e.attr("aria-disabled","true").attr("tabindex","-1")},Z.prototype.isDisabled=function(e){return"true"===e.attr("aria-disabled")},Z.prototype.removeDisabled=function(e){return e.removeAttr("aria-disabled").attr("tabindex","0")},Z.prototype.hasUncompletedRequiredInteractions=function(e){return(void 0!==e?this.getVisibleInteractionsAt(e):this.getVisibleInteractions()).some((function(e){return e.getRequiresCompletion()&&!e.hasFullScore()}))},Z.prototype.getVisibleInteractions=function(){return this.interactions.filter((function(e){return e.isVisible()}))},Z.prototype.getVisibleInteractionsAt=function(e){return this.interactions.filter((function(t){return t.visibleAt(e)}))},Z.prototype.setUserSubmitted=function(e){"boolean"==typeof e&&(this.userSubmitted=e)},Z.prototype.showSolutions=function(){},Z.prototype.getAnswerGiven=function(){return!!this.userSubmitted&&this.interactions.some((function(e){var t,n;return null===(t=(n=e.getInstance()).getAnswerGiven)||void 0===t?void 0:t.call(n)}))},Z.prototype.getTitle=function(){return H5P.createTitle(this.contentData&&this.contentData.metadata&&this.contentData.metadata.title?this.contentData.metadata.title:"Interactive 360 Video")},Z.prototype.findNextInteractionToShow=function(e,t){for(var n,i=0;i<this.interactions.length;i++)if(!this.interactions[i].isVisible()&&(void 0===t||i!==t)){var o=this.interactions[i].getDuration(),r=this.options&&this.options.assets&&this.options.assets.interactions&&this.options.assets.interactions[i]?this.options.assets.interactions[i]:null,s=r&&!0===r.dynamic,a=this.interactions[i].visibleAt(e);if(a){if(!s){n=i;break}(void 0===n||o.from<this.interactions[n].getDuration().from)&&(n=i)}else!a&&(o.from>e||o.from==e&&(void 0===t||i>t))&&(void 0===n||o.from<this.interactions[n].getDuration().from)&&(n=i)}return n},Z.prototype.findNextInteractionToHide=function(e){for(var t,n=0;n<this.visibleInteractions.length;n++)if(this.interactions[this.visibleInteractions[n]]){var i=this.interactions[this.visibleInteractions[n]].getDuration();(void 0===t||i.to<this.interactions[this.visibleInteractions[t]].getDuration().to)&&(t=n)}return t},Z.prototype.hideInteractions=function(e){for(var t=this.visibleInteractions.length-1;t>=0;t--){var n=this.visibleInteractions[t],i=this.interactions[n];i&&!i.visibleAt(e)&&(i.toggle(e),this.visibleInteractions.splice(t,1))}this.nextInteractionToHide=void 0},Z.prototype.showInteractions=function(e){void 0===this.nextInteractionToShow&&(this.nextInteractionToShow=this.findNextInteractionToShow(e));for(var t=[],n=void 0!==this.nextInteractionToShow?this.interactions[this.nextInteractionToShow]:null;n;){var i=this.nextInteractionToShow,o=this.options&&this.options.assets&&this.options.assets.interactions&&this.options.assets.interactions[i]?this.options.assets.interactions[i]:null;if(!(o&&!0===o.dynamic?n.visibleAt(e):n.getDuration().from<=e))break;n.toggle(e),n.repositionToWrapper(this.$videoWrapper),this.visibleInteractions.push(this.nextInteractionToShow),this.nextInteractionToHide=void 0,t.push(n),this.nextInteractionToShow=this.findNextInteractionToShow(e,this.nextInteractionToShow),n=void 0!==this.nextInteractionToShow?this.interactions[this.nextInteractionToShow]:null}this.accessibility.announceInteractions(t)},Z.prototype.toggleInteractions=function(e){this.hideInteractions(e),this.showInteractions(e)},Z.prototype.play=function(){this.video.play()},Z.prototype.seek=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isSkippingProhibited(e)&&!t.force||(this.maxTimeReached=Math.max(this.maxTimeReached,e),this.nextInteractionToShow=this.nextInteractionToHide=void 0,this.video.seek(e))},Z.prototype.pause=function(){this.video&&this.video.pause&&this.video.pause()},Z.prototype.resetTask=function(){var e;this.interactionsProgress=[],this.dnb&&(this.dnb.calledFromResetTask=!0);for(var t=0;t<this.interactions.length;t++){var n;if(this.interactions[t].resetTask(),this.interactions[t].isVisible())null===(n=document.getElementsByClassName("h5p-dialog-close")[0])||void 0===n||n.click()}void 0!==this.bubbleEndscreen&&(this.bubbleEndscreen.toggle(!1,!1),this.controls.$endscreensButton.toggleClass("h5p-star-active",!1));var i=(null===(e=this.params)||void 0===e||null===(e=e.override)||void 0===e?void 0:e.startVideoAt)||0;this.video&&this.video.resetTask(),void 0!==this.controls&&(this.addSliderInteractions(),this.updateCurrentTime(i),this.setSliderPosition(i),this.timeUpdate(i)),this.currentTime=i,this.dnb&&(this.dnb.calledFromResetTask=!1),this.previousState={},this.maxTimeReached=0,this.setUserSubmitted(!1)},Z.prototype.read=function(e){var t=this;t.$read&&(t.readText?t.readText+=("."===t.readText.substr(-1,1)?" ":". ")+e:t.readText=e,t.$read.html(t.readText),setTimeout((function(){t.readText=null,t.$read.html("")}),100))},Z.prototype.getCopyrights=function(){var e=this,t=new H5P.ContentCopyrights;void 0!==e.options.video.files&&void 0!==e.options.video.files[0]&&t.addMedia(new H5P.MediaCopyright(e.options.video.files[0].copyright,e.l10n)),void 0!==e.options.video.startScreenOptions.copyright&&t.addMedia(e.options.video.startScreenOptions.copyright);var n=e.options.video.startScreenOptions.poster;if(n&&void 0!==n.copyright){var i=new H5P.MediaCopyright(n.copyright,e.l10n),o=H5P.getPath(n.path,e.contentId);i.setThumbnail(new H5P.Thumbnail(o,n.width,n.height)),t.addMedia(i)}for(var r=0;r<e.interactions.length;r++){var s=e.interactions[r].getCopyrights();s&&t.addContent(s)}if(e.hasMainSummary()){var a=H5P.newRunnable(e.options.summary.task,e.contentId);if(void 0!==a){var c=new H5P.ContentCopyrights;c.addContent(H5P.getCopyrights(a,{action:e.options.summary.task},e.contentId)),c.setLabel(e.l10n.summary),t.addContent(c)}}return e.options.video.textTracks.videoTrack&&e.options.video.textTracks.videoTrack.length>0&&e.options.video.textTracks.videoTrack.forEach((function(e){e.track&&e.track.copyright&&t.addMedia(new H5P.MediaCopyright(e.track.copyright))})),t},Z.prototype.isSkippingProhibited=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return!this.editor&&("both"===this.preventSkippingMode||"none"!==this.preventSkippingMode&&this.maxTimeReached<e)},Z.SEEKING=4,Z.LOADED=5,Z.ATTACHED=6,Z.humanizeTime=function(e){var t=Z.secondsToMinutesAndHours(e),n="";return 0!==t.hours&&(n+=t.hours+":",t.minutes<10&&(n+="0")),n+=t.minutes+":",t.seconds<10&&(n+="0"),n+=t.seconds},Z.formatTimeForA11y=function(e,t){var n=Z.secondsToMinutesAndHours(e),i=n.hours>0?"".concat(n.hours," ").concat(t.hours,", "):"";return"".concat(i).concat(n.minutes," ").concat(t.minutes,", ").concat(n.seconds," ").concat(t.seconds)},Z.secondsToMinutesAndHours=function(e){var t=Math.floor(e/60);return{seconds:Math.floor(e%60),minutes:t%60,hours:Math.floor(t/60)}};var ie=function(e,t){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")},oe=function(e,t){for(var n=0;n<t.length;n++)if(t[n].name===e)return t[n]},re=function(e,t){null===e?t():setTimeout(t,e)},se=function(){return void 0===window.interactiveVideoCounter&&(window.interactiveVideoCounter=0),window.interactiveVideoCounter++};Z.prototype.getXAPIData=function(){var e=this,t=this.createXAPIEventTemplate("answered");ae(t),t.setScoredResult(e.getScore(),e.getMaxScore(),e,!0,e.getScore()===e.getMaxScore());var n=de(e.interactions);return{statement:t.data.statement,children:n}},Z.prototype.getContext=function(){var e=this.video.getCurrentTime();return void 0===e?{}:{type:"time",value:e}},Z.prototype.showInteractionsAssistance=function(){var e=this;e.editor&&(!e.controls&&1===e.editor.currentTabIndex&&e.video.isLoaded()?(e.$videoWrapper.addClass("heart-beat"),e.$videoInfo||(e.$videoInfo=J("<div>",{class:"h5p-video-info",text:e.l10n.howToCreateInteractions}).appendTo(e.$videoWrapper)),"VimeoPlayer"!==e.video.getHandlerName()||e.$videoPlaybutton||(e.$videoPlaybutton=J("<div>",{class:"h5p-play-button"}).appendTo(e.$videoWrapper)),e.$videoInfo.show(),e.$videoPlaybutton&&e.$videoPlaybutton.show()):(e.$videoWrapper.removeClass("heart-beat info-text"),e.$videoInfo&&e.$videoInfo.hide(),e.$videoPlaybutton&&e.$videoPlaybutton.hide(),e.editor.startGuidedTour()))};var ae=function(e){var t=e.getVerifiedStatementValue(["object","definition"]);H5P.jQuery.extend(t,ce())},ce=function(){var e={interactionType:"compound",type:"http://adlnet.gov/expapi/activities/cmi.interaction",description:{"en-US":""}};return e},le=function(e,t){return void 0!==e&&void 0!==t&&(e.is(t)||J.contains(e.get(0),t.get(0)))},de=function(e){return e.map((function(e){return e.getXAPIData()})).filter((function(e){return!!e}))};const ue=Z;H5P=H5P||{},H5P.Interactive360Video=ue})();